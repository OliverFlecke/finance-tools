(this["webpackJsonpfinance-tools"]=this["webpackJsonpfinance-tools"]||[]).push([[0],{142:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(47),s=(n(91),n(4)),o=n.n(s),i=n(6),l=n(11),u=n(7),d=n(3),j=n(8),b=n(21),x=n(10),O=n(0),h=function(e){var t=e.addAccount,n=Object(c.useState)(!1),r=Object(u.a)(n,2),a=r[0],s=r[1],o=Object(b.a)(),i=o.register,l=o.handleSubmit,h=o.formState.errors,m=Object(c.useCallback)((function(){return s(!1)}),[s]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("button",{onClick:function(){return s((function(e){return!e}))},className:"btn btn-primary space-x-2",children:[Object(O.jsx)(x.a,{className:"inline"}),Object(O.jsx)("span",{className:"align-middle",children:"Add account"})]}),Object(O.jsx)(j.e,{isOpen:a,onDismiss:m,children:Object(O.jsxs)("form",{onSubmit:l((function(e){t(e),m()})),children:[Object(O.jsxs)("div",{className:"p-4",children:[Object(O.jsx)("h2",{className:"text-lg text-gray-700 dark:text-gray-400",children:"Add new account"}),Object(O.jsxs)("fieldset",{className:"space-y-2",children:[Object(O.jsx)(j.d,Object(d.a)(Object(d.a)({placeholder:"Savings, Investments...",label:"Name"},i("name",{required:!0})),{},{errorMessage:h.name&&"Please provide a name for your account"})),Object(O.jsxs)("label",{className:"flex flex-col space-y-2",children:[Object(O.jsx)("span",{className:"text-gray-700 dark:text-gray-300 font-medium text-sm",children:"Type"}),Object(O.jsxs)("select",Object(d.a)(Object(d.a)({className:"py-2 px-4 rounded-md shadow focus:outline-none focus:ring focus:border-indigo-400 bg-white dark:bg-gray-900 dark:text-gray-100 undefined"},i("type",{required:!0})),{},{children:[Object(O.jsx)("option",{value:"Cash",children:"Cash"}),Object(O.jsx)("option",{value:"Investment",children:"Investment"})]}))]})]})]}),Object(O.jsxs)(j.b,{children:[Object(O.jsx)(j.a,{buttonType:"Transparent",onClick:m,children:"Cancel"}),Object(O.jsx)(j.a,{type:"submit",children:"Add"})]})]})})]})};function m(e){var t=e.getFullYear(),n=""+(e.getMonth()+1),c=""+e.getDate();return n.length<2&&(n="0"+n),c.length<2&&(c="0"+c),[t,n,c].join("-")}function f(e){return Number.parseFloat(e.toString().replace(/[,a-zA-Z]/g,""))}var p=Intl.NumberFormat(void 0,{style:"currency",currency:"DKK",currencyDisplay:"code"});function y(e,t){return Number.isNaN(e)?"-":e.toLocaleString(void 0,{style:"currency",currency:null!==t&&void 0!==t?t:"USD",currencyDisplay:"code"})}function v(e,t,n,c){return e*g(t,n,c)}function g(e,t,n){var c,r,a,s="usd";return e=null===(c=e)||void 0===c?void 0:c.toLowerCase(),t=null===(r=t)||void 0===r?void 0:r.toLowerCase(),n=null!==(a=n)&&void 0!==a?a:N,e&&t&&e!==t?e===s?t in n?n[t]:1:t===s?e in n?1/n[e]:1:g(e,s)*g(s,t):1}function k(e,t,n){return Object(c.useCallback)((function(c){return v(c,e,t,n)}),[e,n,t])}var N={dkk:6.36,nok:9,eur:.85};function w(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=null!==(t=localStorage.getItem(e))&&void 0!==t?t:void 0,r=void 0===c||""===c?{}:JSON.parse(c);return Object(d.a)(Object(d.a)({},n),r)}function C(e,t){return function(n,c){var r=t(n,c);return localStorage.setItem(e,JSON.stringify(r)),r}}var S=Object(c.createContext)({state:{accounts:[],entries:{}},dispatch:function(e){}});function D(e,t){return C("account_state",T)(e,t)}function T(e,t){switch(t.type){case"RESET":return{accounts:[],entries:{}};case"LOAD STATE":return t.state;case"ADD ACCOUNT":return Object(d.a)(Object(d.a)({},e),{},{accounts:e.accounts.concat(t.account)});case"ADD ENTRY":return e.entries[t.date]={},Object(d.a)({},e);case"EDIT ENTRY FOR ACCOUNT":return e.entries[t.key][t.name]=t.value,e.entries=(n=e.entries,Object.keys(n).sort().reduce((function(e,t){return e[t]=n[t],e}),{})),Object(d.a)({},e);case"DELETE ENTRY":return delete e.entries[t.date],Object(d.a)(Object(d.a)({},e),{},{entries:e.entries});default:return console.warn("action type not handled: ".concat(JSON.stringify(t))),e}var n}var E=Object(c.memo)((function(){var e=Object(c.useContext)(S).dispatch,t=Object(c.useState)(!1),n=Object(u.a)(t,2),r=n[0],a=n[1],s=Object(c.useCallback)((function(){return a(!1)}),[a]),o=Object(b.a)(),i=o.register,l=(0,o.handleSubmit)((function(t){var n=t.date;e({type:"ADD ENTRY",date:n}),s()}));return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(j.a,{buttonType:"Primary",onClick:function(){return a(!0)},children:"Add entry"}),Object(O.jsx)(j.e,{isOpen:r,onDismiss:s,children:Object(O.jsxs)("form",{onSubmit:l,children:[Object(O.jsxs)("div",{className:"p-4",children:[Object(O.jsx)("h2",{className:"text-lg text-gray-700 dark:text-gray-400",children:"Add new entry on date"}),Object(O.jsx)(j.d,Object(d.a)({type:"date",className:"m-4"},i("date")))]}),Object(O.jsx)(j.b,{children:Object(O.jsx)(j.a,{buttonType:"Primary",type:"submit",children:"Add"})})]})})]})}));E.displayName="AddEntryModal";var A=E,P="https://finance.oliverflecke.me",R="api/v1";function M(e,t){return fetch(e,{method:"post",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}function L(){return(L=Object(i.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(P,"/").concat(R,"/account"),{method:"get",credentials:"include"});case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{entries:e.entries.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{date:new Date(Date.parse(e.date))})}))})})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){return K.apply(this,arguments)}function K(){return(K=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M("".concat(P,"/").concat(R,"/account"),t).then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return U.apply(this,arguments)}function U(){return(U=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M("".concat(P,"/").concat(R,"/account/entry"),t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F=n(61),z=function(){var e=Object(c.useContext)(S),t=e.dispatch,n=e.state,r=Object(c.useCallback)((function(){return t({type:"RESET"})}),[t]),a=Object(c.useCallback)((function(){var e=new Blob([JSON.stringify(n)],{type:"text/plain;charset=utf-8"}),t="finance_".concat((new Date).toISOString().slice(0,19),".json");Object(F.saveAs)(e,t)}),[n]),s=Object(c.useCallback)(function(){var e=Object(i.a)(o.a.mark((function e(n){var c,r,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((c=n.target.files)&&0!==c.length){e.next=3;break}return e.abrupt("return");case 3:return r=c[0],e.next=6,r.text();case 6:a=e.sent;try{s=JSON.parse(a),t({type:"LOAD STATE",state:s})}catch(o){console.warn("Unable to parse file ".concat(r.name))}case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]);return Object(O.jsxs)("div",{className:"flex justify-end space-x-4",children:[Object(O.jsxs)("button",{className:"btn btn-primary space-x-2",onClick:a,children:[Object(O.jsx)(x.j,{className:"inline"}),Object(O.jsx)("span",{className:"align-middle",children:"Save"})]}),Object(O.jsx)("input",{type:"file",onChange:s,className:"bg-blue-400 p-2 rounded"}),Object(O.jsx)("button",{className:"btn btn-secondary",onClick:r,children:"Close"})]})},Y=n(156),B=n(157),J=n(26),q=n(155),_=n(159),V=n(77),W=n(78),Z=n(151),H=n(160),Q=n(162),X=n(163),$=n(158),ee=n(153),te=n(154),ne=n(82),ce=n(20),re=n.n(ce),ae=function(){var e=Object(c.useContext)(S).state,t=Object.keys(e.entries).map((function(t){return{date:t,value:e.entries[t]}})),n=[re.a.amber,re.a.blueGray,re.a.green,re.a.pink,re.a.yellow,re.a.rose,re.a.purple,re.a.sky,re.a.indigo];return Object(O.jsx)(Z.a,{children:function(c){var r,a=24,s=24,o=24,i=24,l=c.width,u=l-o-i,d=300-a-s-20,j=Object(H.a)({range:[0,u],domain:Object(ee.a)(t,(function(e){return new Date(e.date)}))}),b=Object(te.a)(null!==(r=t.map((function(t){var n;return null!==(n=Object(te.a)(e.accounts.map((function(e){return t.value[e.name]}))))&&void 0!==n?n:0})))&&void 0!==r?r:0),x=Object(Q.a)({range:[d,0],domain:[0,null!==b&&void 0!==b?b:0],nice:!0}),h=Object(ne.a)(0,null!==b&&void 0!==b?b:0,10,"~s"),m=re.a.cyan[500],f=Object(X.a)({domain:e.accounts.map((function(e){return e.name})),range:e.accounts.map((function(e,t){return n[t][500]}))});return Object(O.jsxs)("div",{children:[Object(O.jsx)("svg",{width:l,height:300,children:Object(O.jsxs)(q.a,{top:25,left:65,children:[Object(O.jsx)(Y.a,{scale:x,numTicks:10,strokeWidth:1,tickFormat:h,stroke:m,tickLabelProps:function(){return{fill:m,textAnchor:"end",verticalAnchor:"middle"}}}),Object(O.jsx)(B.a,{top:d,left:0,numTicks:4,scale:j,stroke:"transparent",tickLabelProps:function(){return{fill:m,textAnchor:"middle",verticalAnchor:"middle"}}}),e.accounts.map((function(e,c){return Object(O.jsx)(se,{account:e,color:n[c][500],data:t,xScale:j,yScale:x},e.name)}))]})}),Object(O.jsx)(_.a,{scale:f,labelFormat:function(e){return"".concat(e.toUpperCase())},children:function(e){return Object(O.jsx)("div",{className:"flex flex-row flex-wrap",children:e.map((function(e,t){return Object(O.jsxs)(V.a,{margin:"0 5px",children:[Object(O.jsx)("svg",{width:15,height:15,children:Object(O.jsx)("rect",{fill:e.value,width:15,height:15})}),Object(O.jsx)(W.a,{align:"left",margin:"0 0 0 4px",children:e.text})]},"legend-quantile-".concat(t))}))})}})]})}})},se=function(e){var t=e.account,n=e.color,c=e.data,r=e.yScale,a=function(e,t){return function(n){return e(t(n))}},s=a(e.xScale,(function(e){return new Date(e.date)})),o=a(r,(function(e){return e.value[t.name]}));return Object(O.jsx)($.a,{data:c,x:function(e){var t;return null!==(t=s(e))&&void 0!==t?t:0},y:function(e){var t;return null!==(t=o(e))&&void 0!==t?t:0},strokeWidth:1.5,stroke:n,curve:J.a})},oe=function(e){var t,n=e.account,r=e.entry,a=e.date,s=Object(c.useContext)(S).dispatch,l=Object(c.useRef)(null),u=Object(c.useCallback)(function(){var e=Object(i.a)(o.a.mark((function e(t){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(NaN===(c=f(t.currentTarget.innerText))){e.next=5;break}return e.next=4,I({date:a,amount:c,accountId:n.id});case 4:s({type:"EDIT ENTRY FOR ACCOUNT",name:n.name,key:a,value:c});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n.id,n.name,a,s]),d=p.format(null!==(t=r[n.name])&&void 0!==t?t:0);return Object(O.jsx)("td",{contentEditable:!0,ref:l,onBlur:u,className:"px-2 text-right",children:d},n.name)},ie=function(e){var t=e.accounts,n=e.entries,r=Object(c.useContext)(S).dispatch,a=Object.keys(n).map((function(e){return le(t,n,e)}));return Object(O.jsx)("div",{className:"h-full overflow-x-auto pb-4",children:Object(O.jsxs)("table",{className:"w-full",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{className:"text-right whitespace-nowrap",children:[Object(O.jsx)("th",{className:"text-center",children:"Date"}),Object(O.jsx)("th",{className:"text-green-700 dark:text-green-500",children:"Gain"}),Object(O.jsx)("th",{className:"text-blue-700 dark:text-blue-500",children:"Total"}),Object(O.jsx)("th",{className:"text-yellow-700 dark:text-yellow-500",children:"Total cash"}),Object(O.jsx)("th",{className:"text-purple-700 dark:text-purple-500",children:"Total investments"}),t.map((function(e){return Object(O.jsx)("th",{children:Object(O.jsx)("span",{children:e.name})},e.name)})),Object(O.jsx)("th",{})]})}),Object(O.jsx)("tbody",{children:Object.keys(n).map((function(e,c){var s=0===c?0:a[c]-a[c-1],o=a[c],i=le(t,n,e,(function(e){return"Cash"===e.type})),l=le(t,n,e,(function(e){return"Investment"===e.type}));return Object(O.jsxs)("tr",{className:"odd:bg-gray-300 dark:odd:bg-coolGray-800 text-right whitespace-nowrap font-mono",children:[Object(O.jsx)("td",{className:"text-center",children:e}),Object(O.jsx)("td",{className:"text-green-700 dark:text-green-500",children:p.format(s)}),Object(O.jsx)("td",{className:"text-blue-700 dark:text-blue-500",children:p.format(o)}),Object(O.jsx)("td",{className:"text-yellow-700 dark:text-yellow-500",children:p.format(i)}),Object(O.jsx)("td",{className:"text-purple-700 dark:text-purple-500",children:p.format(l)}),t.map((function(t){return Object(O.jsx)(oe,{account:t,entry:n[e],date:e},t.name)})),Object(O.jsx)("td",{children:Object(O.jsx)("button",{onClick:function(){return r({type:"DELETE ENTRY",date:e})},className:"flex  focus:outline-none",children:Object(O.jsx)(x.l,{size:24,className:"text-red-700 dark:text-red-500"})})})]},e)}))})]})})};function le(e,t,n){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return!0};return e.filter(c).map((function(e){var c;return null!==(c=t[n][e.name])&&void 0!==c?c:0})).reduce((function(e,t){return e+t}),0)}var ue=Object(c.memo)((function(){var e=Object(c.useReducer)(D,w("account_state",{accounts:[],entries:{}})),t=Object(u.a)(e,2),n=t[0],r=t[1];Object(c.useEffect)((function(){(function(){return L.apply(this,arguments)})().then((function(e){var t,n={},c=Object(l.a)(e);try{for(c.s();!(t=c.n()).done;){var a,s=t.value,o=Object(l.a)(s.entries);try{for(o.s();!(a=o.n()).done;){var i=a.value,u=m(i.date);u in n||(n[u]={}),n[u][s.name]=i.amount}}catch(d){o.e(d)}finally{o.f()}}}catch(d){c.e(d)}finally{c.f()}r({type:"LOAD STATE",state:{accounts:e,entries:n}})}))}),[]);var a=Object(c.useCallback)(function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G(t);case 2:r({type:"ADD ACCOUNT",account:t});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[r]);return Object(O.jsxs)(S.Provider,{value:{state:n,dispatch:r},children:[Object(O.jsx)(ie,{accounts:n.accounts,entries:n.entries}),Object(O.jsxs)("div",{className:"px-4 flex flex-row justify-between",children:[Object(O.jsx)(h,{addAccount:a}),Object(O.jsx)(A,{})]}),Object(O.jsx)("div",{className:"p-4",children:Object(O.jsx)(z,{})}),Object(O.jsx)(ae,{})]})}));ue.displayName="AccountOverview";var de=ue,je=n(12),be=n(79),xe=n(49);function Oe(e,t,n,c){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:12,a=he(n,1,r),s=r*c;return e*Math.pow(1+a,s)+t*((Math.pow(1+a,s)-1)/a)}function he(e,t,n){return Math.pow(1+e/t,t/n)-1}var me=function(e){var t,n,r;Object(be.a)(e);var a=Object(c.useState)(null),s=Object(u.a)(a,2),o=s[0],i=s[1],l=Object(b.a)({}),x=l.register,h=l.handleSubmit,m=l.formState.errors,p=h((function(e){return i(e)}));return Object(O.jsxs)("div",{className:"px-4 dark:bg-coolGray-700",children:[Object(O.jsx)("h2",{className:"text-xl py-4 lg:text-left",children:"Compound interest calculator"}),Object(O.jsxs)("form",{onSubmit:p,className:"w-full overflow-x-hidden flex flex-col items-center justify-center",children:[Object(O.jsxs)("fieldset",{className:"flex flex-col items-center space-y-6 sm:space-y-0 sm:grid sm:grid-cols-3 sm:gap-6",children:[Object(O.jsx)(xe.a,Object(d.a)({customInput:j.d,thousandSeparator:!0,label:"Existing amount",placeholder:"20,000",inputMode:"numeric",errorMessage:null===(t=m.existingAmount)||void 0===t?void 0:t.message},x("existingAmount",{required:!0}))),Object(O.jsx)(j.d,Object(d.a)({label:"Expected yearly growth",placeholder:"7",errorMessage:m.interestRate&&"Please provide a valid value"},x("interestRate",{required:!0}))),Object(O.jsx)(j.d,Object(d.a)({label:"Investment period",placeholder:"10",errorMessage:m.investmentPeriod&&"Please provide a number of years you are investing"},x("investmentPeriod",{required:!0}))),Object(O.jsx)(j.d,Object(d.a)({label:"Interval of interest accrual",placeholder:"Yearly",errorMessage:null===(n=m.interestAccural)||void 0===n?void 0:n.message},x("interestAccural",{required:!0}))),Object(O.jsx)(xe.a,Object(d.a)({customInput:j.d,thousandSeparator:!0,label:"Monthly deposit",placeholder:"10,000",inputMode:"numeric",errorMessage:null===(r=m.monthlyDeposit)||void 0===r?void 0:r.message},x("monthlyDeposit",{required:!0})))]}),Object(O.jsx)("div",{className:"w-full pt-4 flex justify-center",children:Object(O.jsx)(j.a,{type:"submit",children:"Calculate"})})]}),o&&Object(O.jsx)(pe,{existingAmount:f(o.existingAmount),interestRate:f(o.interestRate),investmentPeriod:f(o.investmentPeriod),monthlyDeposit:f(o.monthlyDeposit),interestAccural:o.interestAccural})]})},fe=Intl.NumberFormat("en-US",{style:"currency",currency:"DKK"}),pe=function(e){var t=Object(c.useMemo)((function(){return e.interestRate/100}),[e.interestRate]),n=Object(c.useMemo)((function(){return 0!==e.monthlyDeposit}),[e.monthlyDeposit]),r=Oe(e.existingAmount,e.monthlyDeposit,t,e.investmentPeriod),a=12*e.monthlyDeposit*e.investmentPeriod+e.existingAmount,s=r-a;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"w-full flex flex-col items-center",children:Object(O.jsxs)("div",{className:"max-w-2xl w-full grid grid-cols-1 gap-y-4 gap-x-8 md:grid-cols-2 justify-center p-8",children:[Object(O.jsx)(ye,{amount:r,label:"Balance after ".concat(e.investmentPeriod," years"),color:"bg-blue-900 dark:bg-blue-300"}),Object(O.jsx)(ye,{amount:e.existingAmount,label:"Initial amount",color:"bg-green-900 dark:bg-green-300"}),Object(O.jsx)(ye,{amount:a,label:"Total deposits",color:"bg-indigo-900 dark:bg-indigo-300"}),Object(O.jsx)(ye,{amount:s,label:"Gain from interest",color:"bg-yellow-900 dark:bg-yellow-300"})]})}),Object(O.jsx)("div",{className:"overflow-x-scroll -mx-4 lg:overflow-x-auto lg:w-full lg:m-0",children:Object(O.jsxs)("table",{className:"w-full",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{className:"text-right",children:[Object(O.jsx)("th",{className:"text-center",children:"Year"}),n&&Object(O.jsx)("th",{children:"Deposit"}),Object(O.jsx)("th",{className:"text-green-800 dark:text-green-400",children:"Interest"}),n&&Object(O.jsx)("th",{children:"Total deposits"}),Object(O.jsx)("th",{className:"text-purple-800 dark:text-purple-400",children:"Total interest"}),Object(O.jsx)("th",{className:"text-red-800 dark:text-red-400",children:"Balance"})]})}),Object(O.jsx)("tbody",{className:"text-right font-mono",children:Object(je.a)(Array(e.investmentPeriod+1).keys()).map((function(c){var r=0===c?e.existingAmount:12*e.monthlyDeposit,a=12*c*e.monthlyDeposit+e.existingAmount,s=Oe(e.existingAmount,e.monthlyDeposit,t,c),o=c-1,i=12*o*e.monthlyDeposit+e.existingAmount,l=Oe(e.existingAmount,e.monthlyDeposit,t,o),u=s-a,d=0===c?0:u-(l-i);return Object(O.jsxs)("tr",{className:"odd:bg-coolGray-200 dark:odd:bg-coolGray-900",children:[Object(O.jsx)("td",{className:"text-center",children:c}),n&&Object(O.jsx)("td",{children:fe.format(r)}),Object(O.jsx)("td",{children:fe.format(d)}),n&&Object(O.jsx)("td",{children:fe.format(a)}),Object(O.jsx)("td",{children:fe.format(u)}),Object(O.jsx)("td",{children:fe.format(s)})]},c)}))})]})})]})},ye=function(e){var t=e.amount,n=e.label,c=e.color;return Object(O.jsxs)("div",{className:"flex space-x-4",children:[Object(O.jsx)("div",{className:"w-6 h-6 rounded-full ".concat(c)}),Object(O.jsxs)("div",{children:[Object(O.jsx)("span",{className:"text-black dark:text-coolGray-300",children:n}),Object(O.jsx)("div",{className:"text-black dark:text-white text-2xl",children:fe.format(t)})]})]})},ve=function(e){var t=e.user,n=e.authorizeUrl,r=e.logout,a=Object(c.useState)(!1),s=Object(u.a)(a,2),o=s[0],i=s[1];return null===t?Object(O.jsx)(ge,{authorizeUrl:n}):Object(O.jsxs)("div",{className:"flex items-center space-x-4",children:[Object(O.jsx)("span",{className:"hidden sm:inline",children:t.login}),Object(O.jsx)("div",{className:"group",onMouseLeave:function(){return i(!1)},children:Object(O.jsx)("button",{onClick:function(){return i((function(e){return!e}))},children:Object(O.jsx)(ke,{user:t})})}),Object(O.jsx)(Ne,{isOpen:o,logout:r})]})},ge=function(e){e.authorizeUrl;return Object(O.jsx)("a",{className:"btn btn-primary",href:"https://localhost:5001/signin?returnUrl=".concat(window.location.href),children:"Login"})},ke=function(e){var t=e.user;return Object(O.jsx)("img",{src:t.avatar_url,alt:"Avatar of the logged in user",className:"max-h-10 rounded-full",loading:"lazy"})},Ne=function(e){var t=e.isOpen,n=e.logout;return Object(O.jsx)("div",{className:"".concat(t?"":"hidden"," group-hover:block absolute right-0 rounded py-4 shadow bg-coolGray-100 dark:bg-coolGray-700"),children:Object(O.jsxs)("button",{onClick:n,className:"btn flex items-center space-x-2 hover:text-coolGray-900 dark:hover:text-coolGray-400 hover:underline",children:[Object(O.jsx)(x.g,{className:"inline"}),Object(O.jsx)("span",{className:"align-middle",children:"Logout"})]})})},we=n(30),Ce=[{path:"/",text:"Overview"},{path:"/stocks",text:"Stocks"},{path:"/compound-calculator",text:"Compound calculator"}],Se=function(){var e=Object(c.useState)(!1),t=Object(u.a)(e,2),n=t[0],r=t[1];return Object(O.jsxs)("nav",{className:"flex flex-col md:flex-row",children:[Object(O.jsxs)("div",{className:"flex items-center",children:[Object(O.jsx)("button",{className:"md:hidden",onClick:function(){return r((function(e){return!e}))},children:n?Object(O.jsx)(x.e,{size:32}):Object(O.jsx)(x.h,{size:32})}),Object(O.jsx)(we.b,{to:"/",children:Object(O.jsx)("h1",{className:"px-4 md:px-0 text-xl uppercase font-sans font-light",children:"Finance tracker"})})]}),Object(O.jsx)("ul",{className:"".concat(n?"flex":"hidden"," flex-col md:flex md:flex-row md:items-center md:space-x-4 md:pl-8"),children:Ce.map((function(e){return Object(O.jsx)("li",{children:Object(O.jsx)(we.b,{to:e.path,className:"align-middle h-full font-light hover:underline",children:e.text})},e.path)}))})]})};var De=function(){var e=Object(j.f)(),t=e.isDarkMode,n=e.setDarkMode,r=Object(c.useState)(null),a=Object(u.a)(r,2),s=a[0],o=a[1];return Object(c.useEffect)((function(){fetch("".concat(P,"/").concat(R,"/user/me"),{credentials:"include"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})).then((function(e){e&&o(e)}))}),[]),Object(O.jsxs)("header",{className:"p-4 flex flex-row justify-between text-gray-300 bg-emerald-900 ",children:[Object(O.jsx)(Se,{}),Object(O.jsxs)("div",{className:"flex flex-row justify-center items-center",children:[Object(O.jsx)(ve,{user:s,authorizeUrl:"".concat(P,"/signin?returnUrl=").concat(window.location.toString())}),Object(O.jsx)("div",{className:"p-4",children:Object(O.jsx)(j.c,{darkMode:t,onToggle:function(){return n(!t)}})})]})]})},Te=n(13),Ee="".concat(P,"/").concat(R);function Ae(e){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Ee,"/stock/tracked"),{method:"POST",credentials:"include",body:t}).then((function(){return console.log("Stock tracked: ".concat(t))})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Re(e,t){return Me.apply(this,arguments)}function Me(){return(Me=Object(i.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Ee,"/stock/lot/").concat(t),{method:"PUT",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Le(e){return Ge.apply(this,arguments)}function Ge(){return(Ge=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Ee,"/stock/lot/").concat(t),{method:"DELETE",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json"}});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ke="".concat(P,"/").concat(R,"/stock");function Ie(){return Ue.apply(this,arguments)}function Ue(){return Ue=Object(i.a)(o.a.mark((function e(){var t,n,c,r,a,s=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=s.length,n=new Array(t),c=0;c<t;c++)n[c]=s[c];return e.next=3,fetch("".concat(Ke,"?symbols=").concat(n.join(",")),{method:"GET"});case 3:return r=e.sent,e.next=6,r.json();case 6:if(!(a=e.sent).error){e.next=11;break}throw new Error(a.error);case 11:return e.abrupt("return",null!==a&&void 0!==a?a:[]);case 12:case"end":return e.stop()}}),e)}))),Ue.apply(this,arguments)}var Fe=n(161),ze="stocks_state",Ye=Object(c.createContext)({state:Je(),dispatch:function(e){}});function Be(e,t){return C(ze,qe)(e,t)}function Je(){for(var e=w(ze,{stocks:[],preferredCurrency:"usd",currencyRates:{usd:{}}}),t=0,n=Object.keys(e.stocks);t<n.length;t++){var c,r=n[t],a=Object(l.a)(e.stocks[r].lots);try{for(a.s();!(c=a.n()).done;){var s=c.value;s.buyDate=new Date(Date.parse(s.buyDate)),s.soldDate=s.soldDate?new Date(Date.parse(s.soldDate)):void 0}}catch(o){a.e(o)}finally{a.f()}}return e}function qe(e,t){switch(console.debug("received action: ".concat(t.type)),t.type){case"ADD STOCK":return e.stocks.find((function(e){return e.symbol===t.stock.symbol}))?e:Object(d.a)(Object(d.a)({},e),{},{stocks:e.stocks.concat(t.stock)});case"DELETE STOCK":return Object(d.a)(Object(d.a)({},e),{},{stocks:e.stocks.filter((function(e){return e.symbol!==t.symbol}))});case"UPDATE STOCKS":return console.log(t.stocks),Object(d.a)(Object(d.a)({},e),{},{stocks:e.stocks.map((function(e){var n=t.stocks.find((function(t){return t.symbol===e.symbol}));return Object(d.a)(Object(d.a)(Object(d.a)({},e),n),{},{lots:e.lots})}))});case"SET STOCKS":return Object(d.a)(Object(d.a)({},e),{},{stocks:t.stocks.map((function(e){var t;return Object(d.a)(Object(d.a)({},e),{},{lots:null!==(t=e.lots)&&void 0!==t?t:[]})}))});case"ADD LOT":var n,c,r,a={id:null!==(n=t.lotId)&&void 0!==n?n:Object(Fe.a)(),shares:0,buyDate:new Date,buyPrice:null!==(c=null===(r=e.stocks.find((function(e){return e.symbol===t.symbol})))||void 0===r?void 0:r.regularMarketPrice)&&void 0!==c?c:0,buyBrokerage:0};return Object(d.a)(Object(d.a)({},e),{},{stocks:e.stocks.map((function(e){return e.symbol!==t.symbol?e:Object(d.a)(Object(d.a)({},e),{},{lots:e.lots.concat(a)})}))});case"DELETE LOT":return Object(d.a)(Object(d.a)({},e),{},{stocks:e.stocks.map((function(e){return e.symbol!==t.symbol?e:Object(d.a)(Object(d.a)({},e),{},{lots:e.lots.filter((function(e){return e.id!==t.id}))})}))});case"EDIT LOT":return Object(d.a)(Object(d.a)({},e),{},{stocks:e.stocks.map((function(e){return e.symbol!==t.symbol?e:Object(d.a)(Object(d.a)({},e),{},{lots:e.lots.filter((function(e){return e.id!==t.lot.id})).concat(t.lot)})}))});case"SET PREFERRED CURRENCY":return Object(d.a)(Object(d.a)({},e),{},{preferredCurrency:t.currency.toLowerCase()});case"SET CURRENCY RATES":return Object(d.a)(Object(d.a)({},e),{},{currencyRates:t.rates});default:return console.warn("action not implemented"),e}}var _e=function(){var e=Object(c.useContext)(Ye).dispatch,t=Object(c.useState)(!1),n=Object(u.a)(t,2),r=n[0],a=n[1],s=Object(b.a)(),l=s.register,h=s.handleSubmit,m=s.formState.errors,f=s.reset,p=Object(c.useCallback)(function(){var t=Object(i.a)(o.a.mark((function t(n){var c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ie(n.symbol);case 2:if(0!==(c=t.sent).length){t.next=7;break}alert("Stock with symbol '".concat(n.symbol,"' was not found")),t.next=11;break;case 7:return t.next=9,Ae(n.symbol);case 9:e({type:"ADD STOCK",stock:Object(d.a)(Object(d.a)({},c[0]),{},{symbol:n.symbol,lots:[]})}),f();case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e,f]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("button",{className:"btn btn-primary space-x-2",onClick:function(){return a(!0)},children:[Object(O.jsx)(x.a,{className:"inline"}),Object(O.jsx)("span",{className:"align-middle",children:"Add symbol"})]}),Object(O.jsx)(j.e,{isOpen:r,onDismiss:function(){return a(!1)},children:Object(O.jsxs)("div",{className:"p-4 rounded bg-coolGray-300 dark:bg-coolGray-700",children:[Object(O.jsx)("h3",{className:"text-lg font-bold pb-4",children:"Add symbol"}),Object(O.jsxs)("form",{onSubmit:h(p),className:"space-y-4",children:[Object(O.jsx)("fieldset",{className:"space-y-2",children:Object(O.jsx)(j.d,Object(d.a)(Object(d.a)({placeholder:"AAPL, MSFT...",label:"Symbol"},l("symbol",{required:!0})),{},{errorMessage:m.symbol&&"Please provide a symbol to add"}))}),Object(O.jsxs)(j.b,{children:[Object(O.jsx)(j.a,{type:"submit",className:"btn btn-primary ml-4 order-last",children:"Add"}),Object(O.jsx)(j.a,{buttonType:"Transparent",onClick:function(){return a(!1)},children:"Cancel"})]})]})]})})]})};function Ve(e){return"https://cdn.jsdelivr.net/gh/fawazahmed0/currency-api@1/latest/currencies/".concat(e,".min.json")}function We(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return e+t}),0)}function Ze(e){return We.apply(void 0,Object(je.a)(e.lots.map((function(e){return e.shares}))))}function He(e){var t=Ze(e);return We.apply(void 0,Object(je.a)(e.lots.map((function(e){return e.shares*e.buyPrice}))))/t}function Qe(e,t,n){var c=Ze(e),r=He(e);return v(c*e.regularMarketPrice-c*r,e.currency,t,null===n||void 0===n?void 0:n.usd)}var Xe=function(){var e=Object(c.useContext)(Ye),t=e.state,n=e.dispatch,r=Object(c.useCallback)(Object(i.a)(o.a.mark((function e(){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ie.apply(void 0,Object(je.a)(t.stocks.map((function(e){return e.symbol}))));case 3:c=e.sent,n({type:"UPDATE STOCKS",stocks:c}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[t.stocks,n]);return Object(O.jsxs)(j.a,{onClick:r,className:"btn btn-primary space-x-2",children:[Object(O.jsx)(x.i,{"aria-label":"Reload current stock prices",className:"inline"}),Object(O.jsx)("span",{className:"align-middle",children:"Refresh stocks"})]})};function $e(e){return e>0?et.positiveColor:e<0?et.negativeColor:""}var et={positiveColor:"text-green-700 dark:text-green-400",negativeColor:"text-red-700 dark:text-red-400"},tt=function(e){var t=e.stock,n=e.lot,r=Object(c.useContext)(Ye),a=r.dispatch,s=r.state,l=s.preferredCurrency,u=s.currencyRates,j=Object(b.a)({mode:"onChange",defaultValues:Object(d.a)(Object(d.a)({},n),{},{buyDate:m(n.buyDate)})}),h=j.register,f=j.handleSubmit,p=j.watch,v=Object(c.useCallback)(function(){var e=Object(i.a)(o.a.mark((function e(n){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==n.buyDate){e.next=2;break}return e.abrupt("return");case 2:return c={shares:Number(n.shares),buyPrice:Number(n.buyPrice),buyDate:new Date(Date.parse(n.buyDate.toString())),buyBrokerage:0},e.next=5,Re(n.id,c);case 5:a({type:"EDIT LOT",symbol:t.symbol,lot:Object(d.a)(Object(d.a)({},c),{},{id:n.id})});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a,t.symbol]),g=Object(c.useCallback)(Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le(n.id);case 2:a({type:"DELETE LOT",symbol:t.symbol,id:n.id});case 3:case"end":return e.stop()}}),e)}))),[a,n.id,t.symbol]),N=k(t.currency,l,u.usd),w=p("shares")*t.regularMarketPrice,C=p("buyPrice")*p("shares"),S=w-C;return Object(O.jsxs)("tr",{className:"odd:bg-coolGray-200 dark:odd:bg-coolGray-600",children:[Object(O.jsx)("td",{colSpan:3,children:Object(O.jsxs)("form",{onChange:f(v),className:"flex flex-row justify-evenly w-full",children:[Object(O.jsx)("input",Object(d.a)(Object(d.a)({type:"date"},h("buyDate")),{},{className:"bg-transparent"})),Object(O.jsx)("input",Object(d.a)(Object(d.a)({type:"number"},h("shares")),{},{className:"bg-transparent w-20 text-center"})),Object(O.jsx)("input",Object(d.a)(Object(d.a)({type:"number"},h("buyPrice")),{},{className:"bg-transparent w-20 text-center"}))]})}),Object(O.jsx)("td",{className:"text-right",children:y(N(w),l)}),Object(O.jsxs)("td",{className:"".concat($e(S)," text-right flex flex-col"),children:[Object(O.jsx)("span",{children:y(N(S),l)}),Object(O.jsxs)("span",{children:[(100*(w/C-1)).toFixed(2)," %"]})]}),Object(O.jsx)("td",{className:"pl-4",children:Object(O.jsx)("button",{onClick:g,children:Object(O.jsx)(x.l,{className:"text-red-700 dark:text-red-500",size:24})})})]})},nt=function(e){var t,n=e.lots,r=e.stock,a=Object(c.useContext)(Ye).dispatch,s=Object(c.useCallback)(Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n={symbol:r.symbol,shares:0,buyDate:new Date,buyPrice:0,buyBrokerage:0},fetch("".concat(Ee,"/stock/lot"),{method:"POST",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()}));case 2:t=e.sent,a({type:"ADD LOT",symbol:r.symbol,lotId:t});case 4:case"end":return e.stop()}var n}),e)}))),[a,r]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("h3",{className:"text-center text-2xl text-green-700 dark:text-green-400",children:["Lots for ",null!==(t=r.displayName)&&void 0!==t?t:r.symbol]}),Object(O.jsxs)("div",{className:"bg-coolGray-300 dark:bg-coolGray-700 rounded shadow mx-8",children:[Object(O.jsxs)("table",{className:"w-full",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"Buy date"}),Object(O.jsx)("th",{children:"Shares"}),Object(O.jsx)("th",{children:"Buy price"}),Object(O.jsx)("th",{children:"Market value"}),Object(O.jsx)("th",{children:"Total gain"})]})}),Object(O.jsx)("tbody",{children:n.map((function(e){return Object(O.jsx)(tt,{lot:e,stock:r},e.id)}))})]}),Object(O.jsx)("div",{className:"p-4",children:Object(O.jsxs)(j.a,{onClick:s,className:"space-x-2 btn btn-primary",children:[Object(O.jsx)(x.a,{className:"inline"}),Object(O.jsx)("span",{className:"align-middle",children:"Add lot"})]})})]})]})},ct=function(e){var t=e.stock,n=Object(c.useContext)(Ye).state,r=n.preferredCurrency,a=n.currencyRates,s=k(t.currency,r,a.usd),o=Ze(t),i=He(t),l=i*o,d=t.regularMarketPrice*o,j=Qe(t,r,a),b=100*(d/l-1),x=Object(c.useState)(!1),h=Object(u.a)(x,2),m=h[0],f=h[1];return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("tr",{className:"w-full relative text-right bg-coolGray-200 dark:bg-coolGray-800",children:[Object(O.jsx)("td",{className:"text-left px-4",children:t.symbol}),Object(O.jsx)("td",{children:y(t.regularMarketPrice,t.currency)}),Object(O.jsx)("td",{children:y(s(d),r)}),Object(O.jsx)("td",{children:o}),Object(O.jsx)("td",{className:$e(i),children:y(i,t.currency)}),Object(O.jsxs)("td",{className:"".concat($e(j)," flex flex-col"),children:[Object(O.jsx)("span",{children:y(j,r)}),Object(O.jsxs)("span",{className:isNaN(b)?"hidden":"",children:[b.toFixed(2),"%"]})]}),Object(O.jsx)(rt,{stock:t,setShowLots:f})]}),Object(O.jsx)("tr",{children:Object(O.jsx)("td",{colSpan:7,className:"p-0 pb-4 ".concat(m?"":"hidden"),children:Object(O.jsx)(nt,{lots:t.lots,stock:t})})})]})},rt=function(e){var t=e.stock,n=e.setShowLots,r=Object(c.useContext)(Ye).dispatch,a=Object(c.useCallback)((function(){r({type:"DELETE STOCK",symbol:t.symbol})}),[r,t.symbol]);return Object(O.jsxs)("td",{className:"h-full space-x-2 pr-4",children:[Object(O.jsx)("button",{onClick:function(){return n((function(e){return!e}))},className:"hover:cursor-pointer",children:Object(O.jsx)(x.f,{size:24})}),Object(O.jsx)("button",{onClick:a,className:"hover:cursor-pointer",children:Object(O.jsx)(x.l,{className:"text-red-500",size:24})})]})},at=function(){var e=Object(c.useContext)(Ye),t=e.state,n=t.preferredCurrency,r=t.currencyRates,a=e.dispatch,s=Object(c.useState)(!1),o=Object(u.a)(s,2),i=o[0],l=o[1],d=Object(c.useCallback)((function(){return l(!0)}),[l]),b=Object(c.useCallback)((function(e){var t=e.currentTarget.value;t&&a({type:"SET PREFERRED CURRENCY",currency:t})}),[a]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("button",{className:"btn btn-secondary",onClick:d,children:Object(O.jsx)(x.k,{})}),Object(O.jsx)(j.e,{isOpen:i,onDismiss:function(){return l(!1)},children:Object(O.jsxs)("div",{className:"p-4 dark:bg-coolGray-900",children:[Object(O.jsx)("h2",{className:"font-bold text-lg",children:"Stock settings"}),Object(O.jsxs)("div",{className:"grid grid-cols-2 gap-8",children:[Object(O.jsx)("label",{children:"Preferred currency"}),Object(O.jsx)("select",{onChange:b,defaultValue:n,className:"rounded dark:bg-coolGray-700",children:Object.keys(r.usd).map((function(e){return Object(O.jsx)("option",{value:e,children:e.toLocaleUpperCase()},e)}))})]}),Object(O.jsx)(j.b,{className:"mt-4",children:Object(O.jsxs)("button",{onClick:function(){return l(!1)},className:"btn btn-primary space-x-2",children:[Object(O.jsx)(x.d,{size:24,className:"inline"}),Object(O.jsx)("span",{className:"align-middle",children:"Close"})]})})]})})]})},st=function(e){var t=e.stocks,n=Object(c.useContext)(Ye).state,r=n.preferredCurrency,a=n.currencyRates,s=Object(c.useMemo)((function(){return We.apply(void 0,Object(je.a)(t.flatMap((function(e){return e.lots.map((function(t){return v(e.regularMarketPrice*t.shares,e.currency,r,a.usd)}))}))))}),[a.usd,r,t]),o=Object(c.useMemo)((function(){return We.apply(void 0,Object(je.a)(t.flatMap((function(e){return e.lots.map((function(t){return v(e.regularMarketPrice*t.shares-t.buyPrice*t.shares,e.currency,r,a.usd)}))}))))}),[a.usd,r,t]);return Object(O.jsxs)("tr",{className:"text-right font-bold dark:text-purple-400",children:[Object(O.jsx)("td",{}),Object(O.jsx)("td",{}),Object(O.jsx)("td",{children:y(s,r)}),Object(O.jsx)("td",{}),Object(O.jsx)("td",{}),Object(O.jsx)("td",{children:y(o,r)})]})},ot=function(){var e=Object(c.useReducer)(Be,Je()),t=Object(u.a)(e,2),n=t[0],r=t[1];return Object(c.useEffect)((function(){(function(){return fetch(Ve(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"usd")).then(function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})().then((function(e){return r({type:"SET CURRENCY RATES",rates:e})})).catch((function(e){return console.warn(e)}))}),[]),Object(c.useEffect)((function(){fetch("".concat(Ee,"/stock/tracked"),{credentials:"include"}).then(function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){return e.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{lots:e.lots.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{buyDate:new Date(Date.parse(e.buyDate)),soldDate:e.soldDate?new Date(Date.parse(e.soldDate)):void 0})}))})}))})).then((function(e){return r({type:"SET STOCKS",stocks:e})})).then(Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie.apply(void 0,Object(je.a)(n.stocks.map((function(e){return e.symbol}))));case 2:t=e.sent,r({type:"UPDATE STOCKS",stocks:t});case 4:case"end":return e.stop()}}),e)}))))}),[]),Object(O.jsxs)(Ye.Provider,{value:{state:n,dispatch:r},children:[Object(O.jsx)("h2",{className:"p-2 font-bold text-lg",children:"Stocks"}),Object(O.jsx)(it,{stocks:n.stocks}),Object(O.jsx)(lt,{})]})},it=function(e){var t=e.stocks,n=e.currencyRates,r=e.preferredCurrency,a=Object(c.useState)(),s=Object(u.a)(a,2),o=s[0],i=s[1],l=Object(c.useState)(!1),d=Object(u.a)(l,2),j=d[0],b=d[1],x=Object(c.useCallback)((function(e){return function(){o===e?b((function(e){return!e})):i(e)}}),[i,b,o]);return Object(O.jsx)("div",{className:"overflow-x-scroll",children:Object(O.jsxs)("table",{className:"w-full",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{className:"text-sm align-bottom text-coolGray-600 dark:text-coolGray-400",children:[Object(O.jsx)(ut,{sort:x,currentSortKey:o,sortKey:"Symbol",ascending:j,children:"Symbol"}),Object(O.jsx)(ut,{sort:x,currentSortKey:o,sortKey:"Current price",ascending:j,children:"Current price"}),Object(O.jsx)(ut,{sort:x,currentSortKey:o,sortKey:"Total value",ascending:j,children:"Total value"}),Object(O.jsx)(ut,{sort:x,currentSortKey:o,sortKey:"Total shares",ascending:j,children:"Total shares"}),Object(O.jsx)(ut,{sort:x,currentSortKey:o,sortKey:"Average price",ascending:j,children:"Average price"}),Object(O.jsx)(ut,{sort:x,currentSortKey:o,sortKey:"Gain",ascending:j,children:"Gain"})]})}),Object(O.jsx)("tbody",{children:t.sort(jt(o,j,r,n)).map((function(e){return Object(O.jsx)(ct,{stock:e},e.symbol)}))}),Object(O.jsx)("tfoot",{children:Object(O.jsx)(st,{stocks:t})})]})})},lt=function(){return Object(O.jsxs)("div",{className:"p-4 justify-between flex",children:[Object(O.jsx)(_e,{}),Object(O.jsx)(Xe,{}),Object(O.jsx)(at,{})]})},ut=function(e){var t=e.sort,n=e.children,c=e.currentSortKey,r=e.sortKey,a=e.ascending;return Object(O.jsx)("th",{children:Object(O.jsxs)("button",{onClick:t(r),className:"px-2 focus:ring-1 ring-red-800 dark:ring-red-600 rounded-sm",children:[n,r===c&&Object(O.jsx)(dt,{ascending:a})]})})},dt=function(e){var t=e.ascending;return Object(O.jsx)(O.Fragment,{children:t?Object(O.jsx)(x.b,{className:"inline"}):Object(O.jsx)(x.c,{className:"inline"})})};function jt(e,t,n,c){return e?function(r,a){var s=0;switch(e){case"Symbol":s=r.symbol.localeCompare(a.symbol);break;case"Gain":s=Qe(r,n,c)-Qe(a,n,c);break;case"Average price":s=He(r)-He(a);break;case"Current price":s=r.regularMarketPrice-a.regularMarketPrice;break;case"Total shares":s=Ze(r)-Ze(a);break;case"Total value":s=r.regularMarketPrice*Ze(r)-a.regularMarketPrice*Ze(a)}return s*(t?1:-1)}:function(){return 0}}var bt=function(){return Object(O.jsx)(we.a,{children:Object(O.jsxs)("main",{className:"min-h-screen h-full bg-white dark:bg-coolGray-900 text-gray-900 dark:text-gray-200",children:[Object(O.jsx)(De,{}),Object(O.jsxs)(Te.c,{children:[Object(O.jsx)(Te.a,{path:"/stocks",children:Object(O.jsx)(ot,{})}),Object(O.jsx)(Te.a,{path:"/compound-calculator",children:Object(O.jsx)(me,{})}),Object(O.jsx)(Te.a,{path:"/",children:Object(O.jsx)(de,{})})]})]})})},xt=document.getElementById("root"),Ot=Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(bt,{})});(null===xt||void 0===xt?void 0:xt.hasChildNodes())?Object(a.hydrate)(Ot,xt):Object(a.render)(Ot,xt)},91:function(e,t,n){}},[[142,1,2]]]);
//# sourceMappingURL=main.0d70a852.chunk.js.map