(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[170],{1365:function(e,t,a){"use strict";let r;a.r(t),a.d(t,{default:function(){return X}});var n=a(7294),l=a(6508),s=a(2370),o=a(515),c=a(7818),i=a(7536),u=a(7538);let m=[{symbol:"AAPL",lots:[{id:"a180c2da-7db5-4326-9d8d-29259bf0d004",shares:6,buyDate:new Date(new Date("2021-04-19T00:00:00+00:00")),buyPrice:124,buyBrokerage:0,soldDate:void 0,soldPrice:void 0,soldBrokerage:void 0},{id:"41705304-bf6d-46cd-bb69-5c60745dd222",shares:3,buyDate:new Date(new Date("2020-02-06T00:00:00+00:00")),buyPrice:86,buyBrokerage:0,soldDate:void 0,soldPrice:void 0,soldBrokerage:void 0}],language:"en-US",region:"US",quoteType:"EQUITY",quoteSourceName:"Delayed Quote",triggerable:!0,currency:"USD",marketState:"CLOSED",shortName:"Apple Inc.",firstTradeDateMilliseconds:3454794e5,fiftyTwoWeekLowChangePercent:.5280097,priceHint:2,postMarketChangePercent:.08447029,postMarketTime:1640998796,postMarketPrice:177.72,postMarketChange:.1499939,regularMarketChange:-.6299896,regularMarketChangePercent:-.35352954,regularMarketTime:1640984403,regularMarketPrice:177.57,regularMarketDayHigh:179.23,regularMarketDayRange:"177.26 - 179.23",regularMarketDayLow:177.26,regularMarketVolume:64062281,regularMarketPreviousClose:178.2,bid:177.71,ask:177.6,bidSize:8,askSize:12,fullExchangeName:"NasdaqGS",financialCurrency:"USD",regularMarketOpen:178.085,averageDailyVolume3Month:88974236,averageDailyVolume10Day:89469180,fiftyTwoWeekLowChange:61.36001,epsTrailingTwelveMonths:5.61,epsForward:6.18,epsCurrentYear:5.74,priceEpsCurrentYear:30.935543,sharesOutstanding:164064e5,bookValue:3.841,fiftyDayAverage:162.0976,fiftyDayAverageChange:15.472412,fiftyDayAverageChangePercent:.09545121,twoHundredDayAverage:143.95364,twoHundredDayAverageChange:33.616364,twoHundredDayAverageChangePercent:.23352215,marketCap:2913284653056,forwardPE:28.733011,priceToBook:46.23015,sourceInterval:15,exchangeDataDelayedBy:0,exchange:"NMS",longName:"Apple Inc.",messageBoardId:"finmb_24937",exchangeTimezoneName:"America/New_York",exchangeTimezoneShortName:"EST",gmtOffSetMilliseconds:-18e6,market:"us_market",esgPopulated:!1,fiftyTwoWeekRange:"116.21 - 182.13",fiftyTwoWeekHighChange:-4.5599976,fiftyTwoWeekHighChangePercent:-.025037047,fiftyTwoWeekLow:116.21,fiftyTwoWeekHigh:182.13,dividendDate:1636588800,earningsTimestamp:1635438600,earningsTimestampStart:1643144400,earningsTimestampEnd:1643662800,trailingAnnualDividendRate:.85,trailingPE:31.652407,trailingAnnualDividendYield:.004769922,averageAnalystRating:"1.8 - Buy",tradeable:!1,displayName:"Apple"},{symbol:"GOOGL",lots:[{id:"24f14409-5869-4ff9-be8a-98a6ef673060",shares:2,buyDate:new Date(new Date("2020-04-09T00:00:00+00:00")),buyPrice:1213,buyBrokerage:0,soldDate:void 0,soldPrice:void 0,soldBrokerage:void 0}],language:"en-US",region:"US",quoteType:"EQUITY",quoteSourceName:"Delayed Quote",triggerable:!0,currency:"USD",marketState:"CLOSED",shortName:"Alphabet Inc.",firstTradeDateMilliseconds:10929222e5,fiftyTwoWeekLowChangePercent:.7080597,priceHint:2,postMarketChangePercent:.102171905,postMarketTime:1640998793,postMarketPrice:2900,postMarketChange:2.959961,regularMarketChange:-26.96997,regularMarketChangePercent:-.9223625,regularMarketTime:1640984403,regularMarketPrice:2897.04,regularMarketDayHigh:2933.97,regularMarketDayRange:"2897.04 - 2933.97",regularMarketDayLow:2897.04,regularMarketVolume:906759,regularMarketPreviousClose:2924.01,bid:2898,ask:2901.52,bidSize:9,askSize:10,fullExchangeName:"NasdaqGS",financialCurrency:"USD",regularMarketOpen:2921,averageDailyVolume3Month:1518517,averageDailyVolume10Day:1224160,fiftyTwoWeekLowChange:1200.9401,epsTrailingTwelveMonths:103.805,epsForward:112.42,epsCurrentYear:108.39,priceEpsCurrentYear:26.727928,sharesOutstanding:300809984,bookValue:367.946,fiftyDayAverage:2908.6145,fiftyDayAverageChange:-11.574463,fiftyDayAverageChangePercent:-.0039793733,twoHundredDayAverage:2620.165,twoHundredDayAverageChange:276.875,twoHundredDayAverageChangePercent:.105670825,marketCap:1921705181184,forwardPE:25.769793,priceToBook:7.8735466,sourceInterval:15,exchangeDataDelayedBy:0,exchange:"NMS",longName:"Alphabet Inc.",messageBoardId:"finmb_29096",exchangeTimezoneName:"America/New_York",exchangeTimezoneShortName:"EST",gmtOffSetMilliseconds:-18e6,market:"us_market",esgPopulated:!1,fiftyTwoWeekRange:"1696.1 - 3019.33",fiftyTwoWeekHighChange:-122.29004,fiftyTwoWeekHighChangePercent:-.040502377,fiftyTwoWeekLow:1696.1,fiftyTwoWeekHigh:3019.33,dividendDate:0,earningsTimestamp:1635278400,earningsTimestampStart:1643662800,earningsTimestampEnd:1644008400,trailingAnnualDividendRate:0,trailingPE:27.908482,trailingAnnualDividendYield:0,averageAnalystRating:"1.7 - Buy",tradeable:!1,displayName:""},{symbol:"MSFT",lots:[{id:"4c7c2e1e-78f9-407c-9747-b3d3f860087f",shares:10,buyDate:new Date("2020-01-06T00:00:00+00:00"),buyPrice:148,buyBrokerage:0,soldDate:void 0,soldPrice:void 0,soldBrokerage:void 0},{id:"dfeb996b-ba02-4533-b4ef-67a8ac5a0173",shares:13,buyDate:new Date("2021-07-02T00:00:00+00:00"),buyPrice:257,buyBrokerage:0,soldDate:void 0,soldPrice:void 0,soldBrokerage:void 0}],language:"en-US",region:"US",quoteType:"EQUITY",quoteSourceName:"Nasdaq Real Time Price",triggerable:!0,currency:"USD",marketState:"CLOSED",shortName:"Microsoft Corporation",firstTradeDateMilliseconds:5111082e5,fiftyTwoWeekLowChangePercent:.58686423,priceHint:2,postMarketChangePercent:.139748,postMarketTime:1640998788,postMarketPrice:336.79,postMarketChange:.470001,regularMarketChange:-3,regularMarketChangePercent:-.8841212,regularMarketTime:1640984404,regularMarketPrice:336.32,regularMarketDayHigh:339.35,regularMarketDayRange:"335.85 - 339.35",regularMarketDayLow:335.85,regularMarketVolume:17943888,regularMarketPreviousClose:339.32,bid:336.32,ask:336.79,bidSize:13,askSize:9,fullExchangeName:"NasdaqGS",financialCurrency:"USD",regularMarketOpen:338.51,averageDailyVolume3Month:25744050,averageDailyVolume10Day:22989170,fiftyTwoWeekLowChange:124.380005,epsTrailingTwelveMonths:8.939,epsForward:10.53,epsCurrentYear:9.21,priceEpsCurrentYear:36.51683,sharesOutstanding:7507979776,bookValue:20.242,fiftyDayAverage:331.8472,fiftyDayAverageChange:4.472809,fiftyDayAverageChangePercent:.013478519,twoHundredDayAverage:287.4741,twoHundredDayAverageChange:48.845917,twoHundredDayAverageChangePercent:.16991416,marketCap:2525083729920,forwardPE:31.939222,priceToBook:16.61496,sourceInterval:15,exchangeDataDelayedBy:0,exchange:"NMS",longName:"Microsoft Corporation",messageBoardId:"finmb_21835",exchangeTimezoneName:"America/New_York",exchangeTimezoneShortName:"EST",gmtOffSetMilliseconds:-18e6,market:"us_market",esgPopulated:!1,fiftyTwoWeekRange:"211.94 - 349.67",fiftyTwoWeekHighChange:-13.350006,fiftyTwoWeekHighChangePercent:-.03817887,fiftyTwoWeekLow:211.94,fiftyTwoWeekHigh:349.67,dividendDate:1646870400,earningsTimestamp:1635264756,earningsTimestampStart:1643021940,earningsTimestampEnd:1643371200,trailingAnnualDividendRate:2.3,trailingPE:37.623894,trailingAnnualDividendYield:.006778262,averageAnalystRating:"1.7 - Buy",tradeable:!1,displayName:"Microsoft"},{symbol:"VWS.CO",lots:[{id:"5672c6b2-ff51-4afc-bb9e-8250a20563a6",shares:100,buyDate:new Date("2020-04-09T00:00:00+00:00"),buyPrice:130,buyBrokerage:0,soldDate:void 0,soldPrice:void 0,soldBrokerage:void 0}],language:"en-US",region:"US",quoteType:"EQUITY",quoteSourceName:"Delayed Quote",triggerable:!0,currency:"DKK",marketState:"CLOSED",shortName:"Vestas Wind Systems A/S",firstTradeDateMilliseconds:957942e6,fiftyTwoWeekLowChangePercent:.17577891,priceHint:2,postMarketChangePercent:0,postMarketTime:0,postMarketPrice:0,postMarketChange:0,regularMarketChange:4.5,regularMarketChangePercent:2.3017902,regularMarketTime:1640879978,regularMarketPrice:200,regularMarketDayHigh:200.4,regularMarketDayRange:"195.25 - 200.4",regularMarketDayLow:195.25,regularMarketVolume:1908374,regularMarketPreviousClose:195.5,bid:200.1,ask:0,bidSize:0,askSize:0,fullExchangeName:"Copenhagen",financialCurrency:"EUR",regularMarketOpen:195.5,averageDailyVolume3Month:2966962,averageDailyVolume10Day:2299444,fiftyTwoWeekLowChange:29.899994,epsTrailingTwelveMonths:5.24,epsForward:.6,epsCurrentYear:.42,priceEpsCurrentYear:476.1905,sharesOutstanding:1009059968,bookValue:4.689,fiftyDayAverage:223.41,fiftyDayAverageChange:-23.410004,fiftyDayAverageChangePercent:-.104784936,twoHundredDayAverage:238.20094,twoHundredDayAverageChange:-38.200943,twoHundredDayAverageChangePercent:-.16037276,marketCap:201812000768,forwardPE:333.3333,priceToBook:42.653015,sourceInterval:15,exchangeDataDelayedBy:0,exchange:"CPH",longName:"Vestas Wind Systems A/S",messageBoardId:"finmb_36246",exchangeTimezoneName:"Europe/Copenhagen",exchangeTimezoneShortName:"CET",gmtOffSetMilliseconds:36e5,market:"dk_market",esgPopulated:!1,fiftyTwoWeekRange:"170.1 - 321.0",fiftyTwoWeekHighChange:-121,fiftyTwoWeekHighChangePercent:-.37694705,fiftyTwoWeekLow:170.1,fiftyTwoWeekHigh:321,dividendDate:0,earningsTimestamp:1643799540,earningsTimestampStart:1643799540,earningsTimestampEnd:1643799540,trailingAnnualDividendRate:.228,trailingPE:38.167942,trailingAnnualDividendYield:.0011662404,averageAnalystRating:"4.0 - Underperform",tradeable:!1,displayName:""}];async function d(e){await fetch(`${u.ft}/stock/tracked`,{method:"POST",credentials:"include",body:e}).then(()=>console.log(`Stock tracked: ${e}`)).catch(e=>console.log(e))}async function g(e,t){await fetch(`${u.ft}/stock/lot/${e}`,{method:"PUT",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}async function y(e){await fetch(`${u.ft}/stock/lot/${e}`,{method:"DELETE",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json"}})}async function f(...e){if(u.xh)return Promise.resolve(m);let t=`${u.ft}/stock`,a=await fetch(`${t}?symbols=${e.join(",")}`,{method:"GET"}),r=await a.json();if(!r.error)return r??[];throw Error(r.error)}var p=a(7384);let k="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var b={randomUUID:k};let h=new Uint8Array(16);function E(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(h)}let D=[];for(let T=0;T<256;++T)D.push((T+256).toString(16).slice(1));var C=function(e,t,a){if(b.randomUUID&&!t&&!e)return b.randomUUID();e=e||{};let r=e.random||(e.rng||E)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){a=a||0;for(let n=0;n<16;++n)t[a+n]=r[n];return t}return function(e,t=0){return(D[e[t+0]]+D[e[t+1]]+D[e[t+2]]+D[e[t+3]]+"-"+D[e[t+4]]+D[e[t+5]]+"-"+D[e[t+6]]+D[e[t+7]]+"-"+D[e[t+8]]+D[e[t+9]]+"-"+D[e[t+10]]+D[e[t+11]]+D[e[t+12]]+D[e[t+13]]+D[e[t+14]]+D[e[t+15]]).toLowerCase()}(r)};let w="stocks_state",v=(0,n.createContext)({state:N(),dispatch(e){}});function S(e,t){return(0,p.n)(w,P)(e,t)}function N(){let e=(0,p.v)(w,{stocks:[],preferredCurrency:"usd",currencyRates:{usd:{}}});for(let t of Object.keys(e.stocks))for(let a of e.stocks[t].lots)a.buyDate=new Date(Date.parse(a.buyDate)),a.soldDate=a.soldDate?new Date(Date.parse(a.soldDate)):void 0;return e}function P(e,t){switch(t.type){case"ADD STOCK":if(e.stocks.find(e=>e.symbol===t.stock.symbol))return e;return{...e,stocks:e.stocks.concat(t.stock)};case"DELETE STOCK":return{...e,stocks:e.stocks.filter(e=>e.symbol!==t.symbol)};case"UPDATE STOCKS":return console.log(t.stocks),{...e,stocks:e.stocks.map(e=>{let a=t.stocks.find(t=>t.symbol===e.symbol);return{...e,...a,lots:e.lots}})};case"SET STOCKS":return{...e,stocks:t.stocks.map(e=>({...e,lots:e.lots??[]}))};case"ADD LOT":{let a={id:t.lotId??C(),shares:0,buyDate:new Date,buyPrice:e.stocks.find(e=>e.symbol===t.symbol)?.regularMarketPrice??0,buyBrokerage:0};return{...e,stocks:e.stocks.map(e=>e.symbol!==t.symbol?e:{...e,lots:e.lots.concat(a)})}}case"DELETE LOT":return{...e,stocks:e.stocks.map(e=>e.symbol!==t.symbol?e:{...e,lots:e.lots.filter(e=>e.id!==t.id)})};case"EDIT LOT":return{...e,stocks:e.stocks.map(e=>e.symbol!==t.symbol?e:{...e,lots:e.lots.filter(e=>e.id!==t.lot.id).concat(t.lot)})};default:return console.warn("action not implemented"),e}}function M(){return(M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}let x=()=>{let{dispatch:e}=(0,n.useContext)(v),[t,a]=(0,n.useState)(!1),{register:r,handleSubmit:l,formState:{errors:o},reset:u}=(0,i.cI)(),m=(0,n.useCallback)(async t=>{let a=await f(t.symbol);0===a.length?alert(`Stock with symbol '${t.symbol}' was not found`):(await d(t.symbol),e({type:"ADD STOCK",stock:{...a[0],symbol:t.symbol,lots:[]}}),u())},[e,u]);return n.createElement(n.Fragment,null,n.createElement("button",{className:"btn btn-primary space-x-2",onClick:()=>a(!0)},n.createElement(s.RWZ,{className:"inline"}),n.createElement("span",{className:"align-middle"},"Add symbol")),n.createElement(c.u_,{isOpen:t,onDismiss:()=>a(!1)},n.createElement("div",{className:"rounded bg-gray-300 p-4 dark:bg-gray-700"},n.createElement("h3",{className:"pb-4 text-lg font-bold"},"Add symbol"),n.createElement("form",{onSubmit:l(m),className:"space-y-4"},n.createElement("fieldset",{className:"space-y-2"},n.createElement(c.II,M({placeholder:"AAPL, MSFT...",label:"Symbol"},r("symbol",{required:!0}),{errorMessage:o.symbol&&"Please provide a symbol to add"}))),n.createElement(c.qO,null,n.createElement(c.zx,{type:"submit",className:"btn btn-primary order-last ml-4"},"Add"),n.createElement(c.zx,{buttonType:"Transparent",onClick:()=>a(!1)},"Cancel"))))))};var A=a(2308);function O(e){return(0,A.S)(...e.lots.map(e=>e.shares))}function L(e){let t=O(e);return(0,A.S)(...e.lots.map(e=>e.shares*e.buyPrice))/t}function U(e,t,a){let r=O(e),n=L(e);return(0,o.fK)(r*e.regularMarketPrice-r*n,t?.usd,e.currency,a)}let B=()=>{let{state:e,dispatch:t}=(0,n.useContext)(v),a=(0,n.useCallback)(async()=>{try{let a=await f(...e.stocks.map(e=>e.symbol));t({type:"UPDATE STOCKS",stocks:a})}catch(r){console.error(r)}},[e.stocks,t]);return n.createElement(c.zx,{onClick:a,className:"btn btn-primary space-x-2"},n.createElement(s.A$d,{"aria-label":"Reload current stock prices",className:"inline"}),n.createElement("span",{className:"align-middle"},"Refresh stocks"))};var K=a(1635),W=a(6645);function H(){return(H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}let I=({stock:e,lot:t})=>{let{dispatch:a}=(0,n.useContext)(v),{values:{currencyRates:r,preferredDisplayCurrency:c}}=(0,n.useContext)(l.Z),{register:u,handleSubmit:m,watch:d}=(0,i.cI)({mode:"onChange",defaultValues:{...t,buyDate:(0,W.p)(t.buyDate)}}),f=(0,n.useCallback)(async t=>{if(""===t.buyDate)return;let r={shares:Number(t.shares),buyPrice:Number(t.buyPrice),buyDate:new Date(Date.parse(t.buyDate.toString())),buyBrokerage:0};await g(t.id,r),a({type:"EDIT LOT",symbol:e.symbol,lot:{...r,id:t.id}})},[a,e.symbol]),p=(0,n.useCallback)(async()=>{await y(t.id),a({type:"DELETE LOT",symbol:e.symbol,id:t.id})},[a,t.id,e.symbol]),k=(0,o.sL)(e.currency,c,r.usd),b=d("shares")*e.regularMarketPrice,h=d("buyPrice")*d("shares"),E=b-h;return n.createElement("tr",{className:"odd:bg-gray-200 dark:odd:bg-gray-600"},n.createElement("td",{colSpan:3},n.createElement("form",{onChange:m(f),className:"flex w-full flex-row justify-evenly"},n.createElement("input",H({type:"date"},u("buyDate"),{className:"bg-transparent"})),n.createElement("input",H({type:"number"},u("shares"),{className:"w-20 bg-transparent text-center"})),n.createElement("input",H({type:"number"},u("buyPrice"),{className:"w-20 bg-transparent text-center"})))),n.createElement("td",{className:"text-right"},(0,o.xG)(k(b),c)),n.createElement("td",{className:`${(0,K.y)(E)} flex flex-col text-right`},n.createElement("span",null,(0,o.xG)(k(E),c)),n.createElement("span",null,((b/h-1)*100).toFixed(2)," %")),n.createElement("td",{className:"pl-4"},n.createElement("button",{onClick:p},n.createElement(s.BFV,{className:"text-red-700 dark:text-red-500",size:24}))))},R=({lots:e,stock:t})=>{let{dispatch:a}=(0,n.useContext)(v),r=(0,n.useCallback)(async()=>{var e;let r=await (e={symbol:t.symbol,shares:0,buyDate:new Date,buyPrice:0,buyBrokerage:0},fetch(`${u.ft}/stock/lot`,{method:"POST",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json()));a({type:"ADD LOT",symbol:t.symbol,lotId:r})},[a,t]);return n.createElement(n.Fragment,null,n.createElement("h3",{className:"text-center text-2xl text-green-700 dark:text-green-400"},"Lots for ",t.displayName??t.symbol),n.createElement("div",{className:"mx-8 rounded bg-gray-300 shadow dark:bg-gray-700"},n.createElement("table",{className:"w-full"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"Buy date"),n.createElement("th",null,"Shares"),n.createElement("th",null,"Buy price"),n.createElement("th",null,"Market value"),n.createElement("th",null,"Total gain"))),n.createElement("tbody",null,e.map(e=>n.createElement(I,{key:e.id,lot:e,stock:t})))),n.createElement("div",{className:"p-4"},n.createElement(c.zx,{onClick:r,className:"btn btn-primary space-x-2"},n.createElement(s.RWZ,{className:"inline"}),n.createElement("span",{className:"align-middle"},"Add lot")))))},V=({stock:e})=>{let{values:{preferredDisplayCurrency:t,currencyRates:a}}=(0,n.useContext)(l.Z),r=(0,o.sL)(e.currency,t,a.usd),s=O(e),c=L(e),i=e.regularMarketPrice*s,u=U(e,a,t),m=(i/(c*s)-1)*100,[d,g]=(0,n.useState)(!1);return n.createElement(n.Fragment,null,n.createElement("tr",{className:"relative w-full bg-gray-200 text-right dark:bg-gray-800"},n.createElement("td",{className:"px-2 text-left"},e.symbol),n.createElement("td",{className:"px-2"},(0,o.xG)(e.regularMarketPrice,e.currency)),n.createElement("td",{className:"px-0"},(0,o.xG)(r(i),t)),n.createElement("td",null,s),n.createElement("td",{className:`px-2 ${(0,K.y)(c)}`},(0,o.xG)(c,e.currency)),n.createElement("td",{className:`px-2 ${(0,K.y)(u)}`},n.createElement("span",null,(0,o.xG)(u,t))),n.createElement("td",{className:`px-1 ${(0,K.y)(m)}`},n.createElement("span",{className:isNaN(m)?"hidden":""},m.toFixed(2)," %")),n.createElement(_,{stock:e,setShowLots:g})),n.createElement("tr",null,n.createElement("td",{colSpan:7,className:`p-0 pb-4 ${d?"":"hidden"}`},n.createElement(R,{lots:e.lots,stock:e}))))},_=({stock:e,setShowLots:t})=>{let{dispatch:a}=(0,n.useContext)(v),r=(0,n.useCallback)(()=>{a({type:"DELETE STOCK",symbol:e.symbol})},[a,e.symbol]);return n.createElement("td",{className:"flex h-full flex-row justify-end space-x-2 px-4"},n.createElement("button",{onClick:()=>t(e=>!e),className:"hover:cursor-pointer"},n.createElement(s.XSk,{size:24})),n.createElement("button",{onClick:r,className:"hover:cursor-pointer"},n.createElement(s.BFV,{className:"text-red-500",size:24})))},z=({stocks:e})=>{let{values:{preferredDisplayCurrency:t,currencyRates:a}}=(0,n.useContext)(l.Z),r=(0,n.useMemo)(()=>(0,A.S)(...e.flatMap(e=>e.lots.map(r=>(0,o.fK)(e.regularMarketPrice*r.shares,a.usd,e.currency,t)))),[a.usd,t,e]),s=(0,n.useMemo)(()=>(0,A.S)(...e.flatMap(e=>e.lots.map(r=>(0,o.fK)(e.regularMarketPrice*r.shares-r.buyPrice*r.shares,a.usd,e.currency,t)))),[a.usd,t,e]);return n.createElement("tr",{className:"text-right font-bold dark:text-purple-400"},n.createElement("td",null),n.createElement("td",null),n.createElement("td",null,(0,o.xG)(r,t)),n.createElement("td",null),n.createElement("td",null),n.createElement("td",null,(0,o.xG)(s,t)),n.createElement("td",null,((r/(r-s)-1)*100).toFixed(2)," %"))},G=()=>{let[e,t]=(0,n.useReducer)(S,N());return(0,n.useEffect)(()=>{(u.xh?Promise.resolve(m):fetch(`${u.ft}/stock/tracked`,{credentials:"include"}).then(async e=>await e.json()).then(e=>e.map(e=>({...e,lots:e.lots.map(e=>({...e,buyDate:new Date(Date.parse(e.buyDate)),soldDate:e.soldDate?new Date(Date.parse(e.soldDate)):void 0}))})))).then(e=>t({type:"SET STOCKS",stocks:e})).then(async()=>{let a=await f(...e.stocks.map(e=>e.symbol));t({type:"UPDATE STOCKS",stocks:a})})},[]),n.createElement(v.Provider,{value:{state:e,dispatch:t}},n.createElement("h2",{className:"page-header"},"Stocks"),n.createElement(j,{stocks:e.stocks}),n.createElement(Y,null))},j=({stocks:e})=>{let{values:{currencyRates:t,preferredDisplayCurrency:a}}=(0,n.useContext)(l.Z),[r,s]=(0,n.useState)(),[c,i]=(0,n.useState)(!1);return n.createElement("div",{className:"overflow-x-scroll"},n.createElement("table",{className:"w-full"},n.createElement("thead",null,n.createElement(F,{sortKey:r,ascending:c,setAscending:i,setSortKey:s})),n.createElement("tbody",null,e.sort(function(e,t,a,r){if(!t)return()=>0;let n=t=>(0,o.fK)(t.regularMarketPrice,e?.usd,t.currency,r);return(l,s)=>{let c=0;switch(t){case"Symbol":c=l.symbol.localeCompare(s.symbol);break;case"Gain":c=U(l,e,r)-U(s,e,r);break;case"Gain percentage":let i=e=>{let t=O(e),a=L(e)*t;return(e.regularMarketPrice*t/a-1)*100};c=i(l)-i(s);break;case"Average price":c=(0,o.fK)(L(l),e.usd,l.currency,r)-(0,o.fK)(L(s),e.usd,s.currency,r);break;case"Current price":c=n(l)-n(s);break;case"Total shares":c=O(l)-O(s);break;case"Total value":c=n(l)*O(l)-n(s)*O(s)}return c*(a?1:-1)}}(t,r,c,a)).map(e=>n.createElement(V,{key:e.symbol,stock:e}))),n.createElement("tfoot",null,n.createElement(z,{stocks:e}))))},F=({sortKey:e,ascending:t,setAscending:a,setSortKey:r})=>{let l=(0,n.useCallback)(t=>()=>{e===t?a(e=>!e):r(t)},[r,a,e]);return n.createElement("tr",{className:"align-bottom text-sm text-gray-600 dark:text-gray-400"},n.createElement($,{sort:l,currentSortKey:e,sortKey:"Symbol",ascending:t},"Symbol"),n.createElement($,{sort:l,currentSortKey:e,sortKey:"Current price",ascending:t},"Price"),n.createElement($,{sort:l,currentSortKey:e,sortKey:"Total value",ascending:t},"Total value"),n.createElement($,{sort:l,currentSortKey:e,sortKey:"Total shares",ascending:t},"Shares"),n.createElement($,{sort:l,currentSortKey:e,sortKey:"Average price",ascending:t},"Avg price"),n.createElement($,{sort:l,currentSortKey:e,sortKey:"Gain",ascending:t},"Gain"),n.createElement($,{sort:l,currentSortKey:e,sortKey:"Gain percentage",ascending:t},"Percentage"))},Y=()=>n.createElement("div",{className:"flex justify-between p-4"},n.createElement(x,null),n.createElement(B,null)),$=({sort:e,children:t,currentSortKey:a,sortKey:r,ascending:l})=>n.createElement("th",null,n.createElement("button",{onClick:e(r),className:"whitespace-nowrap rounded-sm ring-red-800 focus:ring-1 dark:ring-red-600"},t,r===a&&n.createElement(q,{ascending:l}))),q=({ascending:e})=>n.createElement(n.Fragment,null,e?n.createElement(s.lmx,{className:"inline"}):n.createElement(s.Gal,{className:"inline"}));var Z=a(447);let Q=()=>n.createElement(n.Fragment,null,n.createElement(Z.Z,{title:"Stocks"}),n.createElement(G,null));var X=Q},447:function(e,t,a){"use strict";var r=a(9008),n=a.n(r),l=a(7294);let s=({title:e})=>{let t=`${e} | Finance`;return l.createElement(n(),null,l.createElement("title",null,t))};t.Z=s},1635:function(e,t,a){"use strict";function r(e){return e>0?n.positiveColor:e<0?n.negativeColor:""}a.d(t,{y:function(){return r}});let n={positiveColor:"text-green-700 dark:text-green-500",negativeColor:"text-red-700 dark:text-red-500"}},515:function(e,t,a){"use strict";a.d(t,{CV:function(){return i},fK:function(){return s},p3:function(){return n},sL:function(){return c},xG:function(){return l}});var r=a(7294);function n(e){return Number.parseFloat(e.toString().replace(/[,a-zA-Z]/g,""))}function l(e,t){if(!e||Number.isNaN(e))return"0";let a=t=>e.toLocaleString("en-US",{style:"currency",currency:t,currencyDisplay:"symbol"});try{return a(t??"USD")}catch(r){if(r instanceof RangeError&&r.message.startsWith("Invalid currency code")&&t)return a("USD").replace("USD",t);return e.toString()}}function s(e,t,a,r){return e*o(t,a,r)}function o(e,t,a){let r=t?.toLowerCase(),n=a?.toLowerCase();return r&&n&&r!==n?"usd"===r?"GBp"===a?100*e.gbp:n in e?e[n]:1:"usd"!==n?o(e,t,"usd")*o(e,"usd",a):"GBp"===t?1/(100*e.gbp):r in e?1/e[r]:1:1}function c(e,t,a){return(0,r.useCallback)(r=>r*o(a,e,t),[e,a,t])}function i(e){return Object.keys(e).sort().reduce((t,a)=>(t[a]=e[a],t),{})}Intl.NumberFormat(void 0,{style:"currency",currency:"DKK",currencyDisplay:"code"})},6645:function(e,t,a){"use strict";function r(e){let t=e.getFullYear(),a=""+(e.getMonth()+1),r=""+e.getDate();return a.length<2&&(a="0"+a),r.length<2&&(r="0"+r),[t,a,r].join("-")}a.d(t,{p:function(){return r}})},2308:function(e,t,a){"use strict";function r(...e){return e.reduce((e,t)=>e+t,0)}a.d(t,{S:function(){return r}})},2337:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/stocks",function(){return a(1365)}])}},function(e){e.O(0,[536,888,774,179],function(){return e(e.s=2337)}),_N_E=e.O()}]);