(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[170],{5859:function(e,t,a){"use strict";let r;a.r(t),a.d(t,{default:function(){return pages_stocks}});var n=a(75271),o=a(86028),s=a(79498),l=a(67850),c=a(90781),i=a(28533),u=a(48050);let d=[{symbol:"AAPL",lots:[{id:"a180c2da-7db5-4326-9d8d-29259bf0d004",shares:6,buyDate:new Date(new Date("2021-04-19T00:00:00+00:00")),buyPrice:124,buyBrokerage:0,soldDate:void 0,soldPrice:void 0,soldBrokerage:void 0},{id:"41705304-bf6d-46cd-bb69-5c60745dd222",shares:3,buyDate:new Date(new Date("2020-02-06T00:00:00+00:00")),buyPrice:86,buyBrokerage:0,soldDate:void 0,soldPrice:void 0,soldBrokerage:void 0}],language:"en-US",region:"US",quoteType:"EQUITY",quoteSourceName:"Delayed Quote",triggerable:!0,currency:"USD",marketState:"CLOSED",shortName:"Apple Inc.",firstTradeDateMilliseconds:3454794e5,fiftyTwoWeekLowChangePercent:.5280097,priceHint:2,postMarketChangePercent:.08447029,postMarketTime:1640998796,postMarketPrice:177.72,postMarketChange:.1499939,regularMarketChange:-.6299896,regularMarketChangePercent:-.35352954,regularMarketTime:1640984403,regularMarketPrice:177.57,regularMarketDayHigh:179.23,regularMarketDayRange:"177.26 - 179.23",regularMarketDayLow:177.26,regularMarketVolume:64062281,regularMarketPreviousClose:178.2,bid:177.71,ask:177.6,bidSize:8,askSize:12,fullExchangeName:"NasdaqGS",financialCurrency:"USD",regularMarketOpen:178.085,averageDailyVolume3Month:88974236,averageDailyVolume10Day:89469180,fiftyTwoWeekLowChange:61.36001,epsTrailingTwelveMonths:5.61,epsForward:6.18,epsCurrentYear:5.74,priceEpsCurrentYear:30.935543,sharesOutstanding:164064e5,bookValue:3.841,fiftyDayAverage:162.0976,fiftyDayAverageChange:15.472412,fiftyDayAverageChangePercent:.09545121,twoHundredDayAverage:143.95364,twoHundredDayAverageChange:33.616364,twoHundredDayAverageChangePercent:.23352215,marketCap:2913284653056,forwardPE:28.733011,priceToBook:46.23015,sourceInterval:15,exchangeDataDelayedBy:0,exchange:"NMS",longName:"Apple Inc.",messageBoardId:"finmb_24937",exchangeTimezoneName:"America/New_York",exchangeTimezoneShortName:"EST",gmtOffSetMilliseconds:-18e6,market:"us_market",esgPopulated:!1,fiftyTwoWeekRange:"116.21 - 182.13",fiftyTwoWeekHighChange:-4.5599976,fiftyTwoWeekHighChangePercent:-.025037047,fiftyTwoWeekLow:116.21,fiftyTwoWeekHigh:182.13,dividendDate:1636588800,earningsTimestamp:1635438600,earningsTimestampStart:1643144400,earningsTimestampEnd:1643662800,trailingAnnualDividendRate:.85,trailingPE:31.652407,trailingAnnualDividendYield:.004769922,averageAnalystRating:"1.8 - Buy",tradeable:!1,displayName:"Apple"},{symbol:"GOOGL",lots:[{id:"24f14409-5869-4ff9-be8a-98a6ef673060",shares:2,buyDate:new Date(new Date("2020-04-09T00:00:00+00:00")),buyPrice:1213,buyBrokerage:0,soldDate:void 0,soldPrice:void 0,soldBrokerage:void 0}],language:"en-US",region:"US",quoteType:"EQUITY",quoteSourceName:"Delayed Quote",triggerable:!0,currency:"USD",marketState:"CLOSED",shortName:"Alphabet Inc.",firstTradeDateMilliseconds:10929222e5,fiftyTwoWeekLowChangePercent:.7080597,priceHint:2,postMarketChangePercent:.102171905,postMarketTime:1640998793,postMarketPrice:2900,postMarketChange:2.959961,regularMarketChange:-26.96997,regularMarketChangePercent:-.9223625,regularMarketTime:1640984403,regularMarketPrice:2897.04,regularMarketDayHigh:2933.97,regularMarketDayRange:"2897.04 - 2933.97",regularMarketDayLow:2897.04,regularMarketVolume:906759,regularMarketPreviousClose:2924.01,bid:2898,ask:2901.52,bidSize:9,askSize:10,fullExchangeName:"NasdaqGS",financialCurrency:"USD",regularMarketOpen:2921,averageDailyVolume3Month:1518517,averageDailyVolume10Day:1224160,fiftyTwoWeekLowChange:1200.9401,epsTrailingTwelveMonths:103.805,epsForward:112.42,epsCurrentYear:108.39,priceEpsCurrentYear:26.727928,sharesOutstanding:300809984,bookValue:367.946,fiftyDayAverage:2908.6145,fiftyDayAverageChange:-11.574463,fiftyDayAverageChangePercent:-.0039793733,twoHundredDayAverage:2620.165,twoHundredDayAverageChange:276.875,twoHundredDayAverageChangePercent:.105670825,marketCap:1921705181184,forwardPE:25.769793,priceToBook:7.8735466,sourceInterval:15,exchangeDataDelayedBy:0,exchange:"NMS",longName:"Alphabet Inc.",messageBoardId:"finmb_29096",exchangeTimezoneName:"America/New_York",exchangeTimezoneShortName:"EST",gmtOffSetMilliseconds:-18e6,market:"us_market",esgPopulated:!1,fiftyTwoWeekRange:"1696.1 - 3019.33",fiftyTwoWeekHighChange:-122.29004,fiftyTwoWeekHighChangePercent:-.040502377,fiftyTwoWeekLow:1696.1,fiftyTwoWeekHigh:3019.33,dividendDate:0,earningsTimestamp:1635278400,earningsTimestampStart:1643662800,earningsTimestampEnd:1644008400,trailingAnnualDividendRate:0,trailingPE:27.908482,trailingAnnualDividendYield:0,averageAnalystRating:"1.7 - Buy",tradeable:!1,displayName:""},{symbol:"MSFT",lots:[{id:"4c7c2e1e-78f9-407c-9747-b3d3f860087f",shares:10,buyDate:new Date("2020-01-06T00:00:00+00:00"),buyPrice:148,buyBrokerage:0,soldDate:void 0,soldPrice:void 0,soldBrokerage:void 0},{id:"dfeb996b-ba02-4533-b4ef-67a8ac5a0173",shares:13,buyDate:new Date("2021-07-02T00:00:00+00:00"),buyPrice:257,buyBrokerage:0,soldDate:void 0,soldPrice:void 0,soldBrokerage:void 0}],language:"en-US",region:"US",quoteType:"EQUITY",quoteSourceName:"Nasdaq Real Time Price",triggerable:!0,currency:"USD",marketState:"CLOSED",shortName:"Microsoft Corporation",firstTradeDateMilliseconds:5111082e5,fiftyTwoWeekLowChangePercent:.58686423,priceHint:2,postMarketChangePercent:.139748,postMarketTime:1640998788,postMarketPrice:336.79,postMarketChange:.470001,regularMarketChange:-3,regularMarketChangePercent:-.8841212,regularMarketTime:1640984404,regularMarketPrice:336.32,regularMarketDayHigh:339.35,regularMarketDayRange:"335.85 - 339.35",regularMarketDayLow:335.85,regularMarketVolume:17943888,regularMarketPreviousClose:339.32,bid:336.32,ask:336.79,bidSize:13,askSize:9,fullExchangeName:"NasdaqGS",financialCurrency:"USD",regularMarketOpen:338.51,averageDailyVolume3Month:25744050,averageDailyVolume10Day:22989170,fiftyTwoWeekLowChange:124.380005,epsTrailingTwelveMonths:8.939,epsForward:10.53,epsCurrentYear:9.21,priceEpsCurrentYear:36.51683,sharesOutstanding:7507979776,bookValue:20.242,fiftyDayAverage:331.8472,fiftyDayAverageChange:4.472809,fiftyDayAverageChangePercent:.013478519,twoHundredDayAverage:287.4741,twoHundredDayAverageChange:48.845917,twoHundredDayAverageChangePercent:.16991416,marketCap:2525083729920,forwardPE:31.939222,priceToBook:16.61496,sourceInterval:15,exchangeDataDelayedBy:0,exchange:"NMS",longName:"Microsoft Corporation",messageBoardId:"finmb_21835",exchangeTimezoneName:"America/New_York",exchangeTimezoneShortName:"EST",gmtOffSetMilliseconds:-18e6,market:"us_market",esgPopulated:!1,fiftyTwoWeekRange:"211.94 - 349.67",fiftyTwoWeekHighChange:-13.350006,fiftyTwoWeekHighChangePercent:-.03817887,fiftyTwoWeekLow:211.94,fiftyTwoWeekHigh:349.67,dividendDate:1646870400,earningsTimestamp:1635264756,earningsTimestampStart:1643021940,earningsTimestampEnd:1643371200,trailingAnnualDividendRate:2.3,trailingPE:37.623894,trailingAnnualDividendYield:.006778262,averageAnalystRating:"1.7 - Buy",tradeable:!1,displayName:"Microsoft"},{symbol:"VWS.CO",lots:[{id:"5672c6b2-ff51-4afc-bb9e-8250a20563a6",shares:100,buyDate:new Date("2020-04-09T00:00:00+00:00"),buyPrice:130,buyBrokerage:0,soldDate:void 0,soldPrice:void 0,soldBrokerage:void 0}],language:"en-US",region:"US",quoteType:"EQUITY",quoteSourceName:"Delayed Quote",triggerable:!0,currency:"DKK",marketState:"CLOSED",shortName:"Vestas Wind Systems A/S",firstTradeDateMilliseconds:957942e6,fiftyTwoWeekLowChangePercent:.17577891,priceHint:2,postMarketChangePercent:0,postMarketTime:0,postMarketPrice:0,postMarketChange:0,regularMarketChange:4.5,regularMarketChangePercent:2.3017902,regularMarketTime:1640879978,regularMarketPrice:200,regularMarketDayHigh:200.4,regularMarketDayRange:"195.25 - 200.4",regularMarketDayLow:195.25,regularMarketVolume:1908374,regularMarketPreviousClose:195.5,bid:200.1,ask:0,bidSize:0,askSize:0,fullExchangeName:"Copenhagen",financialCurrency:"EUR",regularMarketOpen:195.5,averageDailyVolume3Month:2966962,averageDailyVolume10Day:2299444,fiftyTwoWeekLowChange:29.899994,epsTrailingTwelveMonths:5.24,epsForward:.6,epsCurrentYear:.42,priceEpsCurrentYear:476.1905,sharesOutstanding:1009059968,bookValue:4.689,fiftyDayAverage:223.41,fiftyDayAverageChange:-23.410004,fiftyDayAverageChangePercent:-.104784936,twoHundredDayAverage:238.20094,twoHundredDayAverageChange:-38.200943,twoHundredDayAverageChangePercent:-.16037276,marketCap:201812000768,forwardPE:333.3333,priceToBook:42.653015,sourceInterval:15,exchangeDataDelayedBy:0,exchange:"CPH",longName:"Vestas Wind Systems A/S",messageBoardId:"finmb_36246",exchangeTimezoneName:"Europe/Copenhagen",exchangeTimezoneShortName:"CET",gmtOffSetMilliseconds:36e5,market:"dk_market",esgPopulated:!1,fiftyTwoWeekRange:"170.1 - 321.0",fiftyTwoWeekHighChange:-121,fiftyTwoWeekHighChangePercent:-.37694705,fiftyTwoWeekLow:170.1,fiftyTwoWeekHigh:321,dividendDate:0,earningsTimestamp:1643799540,earningsTimestampStart:1643799540,earningsTimestampEnd:1643799540,trailingAnnualDividendRate:.228,trailingPE:38.167942,trailingAnnualDividendYield:.0011662404,averageAnalystRating:"4.0 - Underperform",tradeable:!1,displayName:""}];function useSharesCallback(){let e=(0,u.t1)();return(0,n.useCallback)(async(...t)=>{if(u.xh)return d;let a=await e(`${u.ft}/stock?symbols=${t.join(",")}`,{method:"GET"});return a?.status===200&&a?await a.json():null},[e])}var m=a(89115);let g="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var y={randomUUID:g};let k=new Uint8Array(16),f=[];for(let e=0;e<256;++e)f.push((e+256).toString(16).slice(1));var esm_browser_v4=function(e,t,a){if(y.randomUUID&&!t&&!e)return y.randomUUID();e=e||{};let n=e.random||(e.rng||function(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(k)})();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){a=a||0;for(let e=0;e<16;++e)t[a+e]=n[e];return t}return function(e,t=0){return f[e[t+0]]+f[e[t+1]]+f[e[t+2]]+f[e[t+3]]+"-"+f[e[t+4]]+f[e[t+5]]+"-"+f[e[t+6]]+f[e[t+7]]+"-"+f[e[t+8]]+f[e[t+9]]+"-"+f[e[t+10]]+f[e[t+11]]+f[e[t+12]]+f[e[t+13]]+f[e[t+14]]+f[e[t+15]]}(n)};let p="stocks_state",b=(0,n.createContext)({state:getDefaultStockState(),dispatch:e=>{}});function stockReducer(e,t){return(0,m.n)(p,reducer)(e,t)}function getDefaultStockState(){let e=(0,m.v)(p,{stocks:[],preferredCurrency:"usd",currencyRates:{usd:{}},error:null});return e}function reducer(e,t){switch(t.type){case"ADD STOCK":if(e.stocks.find(e=>e.symbol===t.stock.symbol))return e;return{...e,stocks:e.stocks.concat(t.stock)};case"DELETE STOCK":return{...e,stocks:e.stocks.filter(e=>e.symbol!==t.symbol)};case"UPDATE STOCKS":if(console.log("Updating stocks"),console.log(t.stocks),null===t.stocks)return{...e,error:{type:"MISSING STOCKS",message:"Unable to retrieve stock prices"}};{let a=t.stocks;return{...e,error:null,stocks:e.stocks.map(e=>{let t=a.find(t=>t.symbol===e.symbol);return{...e,...t,lots:e.lots}})}}case"SET STOCKS":return{...e,stocks:t.stocks.map(e=>({...e,lots:e.lots??[]}))};case"ADD LOT":{let a={id:t.lotId??esm_browser_v4(),shares:0,buyDate:new Date,buyPrice:e.stocks.find(e=>e.symbol===t.symbol)?.regularMarketPrice??0,buyBrokerage:0};return{...e,stocks:e.stocks.map(e=>e.symbol!==t.symbol?e:{...e,lots:e.lots.concat(a)})}}case"DELETE LOT":return{...e,stocks:e.stocks.map(e=>e.symbol!==t.symbol?e:{...e,lots:e.lots.filter(e=>e.id!==t.id)})};case"EDIT LOT":return{...e,stocks:e.stocks.map(e=>e.symbol!==t.symbol?e:{...e,lots:e.lots.filter(e=>e.id!==t.lot.id).concat(t.lot)})};default:return console.warn("action not implemented"),e}}function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}var Stocks_AddStock=()=>{let{dispatch:e}=(0,n.useContext)(b),t=useSharesCallback(),a=(0,u.ku)(`${u.ft}/stock/tracked`,{method:"POST"}),[r,o]=(0,n.useState)(!1),{register:l,handleSubmit:d,formState:{errors:m},reset:g}=(0,i.cI)(),y=(0,n.useCallback)(async r=>{let n=await t(r.symbol);null===n||0===n.length?alert(`Stock with symbol '${r.symbol}' was not found`):(await a(r.symbol),e({type:"ADD STOCK",stock:{...n[0],symbol:r.symbol,lots:[]}}),g())},[e,t,g,a]);return n.createElement(n.Fragment,null,n.createElement("button",{className:"btn btn-primary space-x-2",onClick:()=>o(!0)},n.createElement(s.RWZ,{className:"inline"}),n.createElement("span",{className:"align-middle"},"Add symbol")),n.createElement(c.u_,{isOpen:r,onDismiss:()=>o(!1)},n.createElement("div",{className:"rounded bg-gray-300 p-4 dark:bg-gray-700"},n.createElement("h3",{className:"pb-4 text-lg font-bold"},"Add symbol"),n.createElement("form",{onSubmit:d(y),className:"space-y-4"},n.createElement("fieldset",{className:"space-y-2"},n.createElement(c.II,_extends({placeholder:"AAPL, MSFT...",label:"Symbol"},l("symbol",{required:!0}),{errorMessage:m.symbol&&"Please provide a symbol to add"}))),n.createElement(c.qO,null,n.createElement(c.zx,{type:"submit",className:"btn btn-primary order-last ml-4"},"Add"),n.createElement(c.zx,{buttonType:"Transparent",onClick:()=>o(!1)},"Cancel"))))))},h=a(26754);function stockTotalShares(e){return(0,h.S)(...e.lots.map(e=>e.shares))}function stockAvgPrice(e){let t=stockTotalShares(e);return(0,h.S)(...e.lots.map(e=>e.shares*e.buyPrice))/t}function stockGain(e,t,a){let r=stockTotalShares(e),n=stockAvgPrice(e);return(0,l.fK)(r*e.regularMarketPrice-r*n,t?.usd,e.currency,a)}var Stocks_RefreshStocksButton=()=>{let{state:e,dispatch:t}=(0,n.useContext)(b),a=useSharesCallback(),r=(0,n.useCallback)(async()=>{try{let r=await a(...e.stocks.map(e=>e.symbol));t({type:"UPDATE STOCKS",stocks:r})}catch(e){console.error(e)}},[a,e.stocks,t]);return n.createElement(c.zx,{onClick:r,className:"btn btn-primary space-x-2"},n.createElement(s.A$d,{"aria-label":"Reload current stock prices",className:"inline"}),n.createElement("span",{className:"align-middle"},"Refresh stocks"))},S=a(57289),E=a(16885),D=a(31485);function StockLotRow_extends(){return(StockLotRow_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}var Stocks_StockLotRow=({stock:e,lot:t})=>{let{dispatch:a}=(0,n.useContext)(b),r=function(){let e=(0,u.t1)();return(0,n.useCallback)((t,a)=>e(`${u.ft}/stock/lot/${t}`,{method:"PUT"},a),[e])}(),s=function(){let e=(0,u.t1)();return(0,n.useCallback)(t=>e(`${u.ft}/stock/lot/${t}`,{method:"DELETE"}),[e])}(),{values:{currencyRates:c,preferredDisplayCurrency:d}}=(0,n.useContext)(o.Z),{register:m,handleSubmit:g,watch:y}=(0,i.cI)({mode:"onChange",defaultValues:{...t,buyDate:(0,E.p)(t.buyDate)}}),k=(0,n.useCallback)(async t=>{if(""===t.buyDate)return;let n={shares:Number(t.shares),buyPrice:Number(t.buyPrice),buyDate:new Date(Date.parse(t.buyDate.toString())),buyBrokerage:0};await r(t.id,n),a({type:"EDIT LOT",symbol:e.symbol,lot:{...n,id:t.id}})},[a,e.symbol,r]),f=(0,n.useCallback)(async()=>{await s(t.id),a({type:"DELETE LOT",symbol:e.symbol,id:t.id})},[s,a,t.id,e.symbol]),p=(0,l.sL)(e.currency,d,c.usd),h=y("shares")*e.regularMarketPrice,C=y("buyPrice")*y("shares"),T=h-C;return n.createElement("tr",{className:"odd:bg-gray-200 dark:odd:bg-gray-600"},n.createElement("td",{colSpan:3},n.createElement("form",{onChange:g(k),className:"flex w-full flex-row justify-evenly"},n.createElement("input",StockLotRow_extends({type:"date"},m("buyDate"),{className:"bg-transparent"})),n.createElement("input",StockLotRow_extends({type:"number"},m("shares"),{className:"w-20 bg-transparent text-center"})),n.createElement("input",StockLotRow_extends({type:"number"},m("buyPrice"),{className:"w-20 bg-transparent text-center"})))),n.createElement("td",{className:"text-right"},(0,l.xG)(p(h),d)),n.createElement("td",{className:`${(0,S.yY)(T)} flex flex-col text-right`},n.createElement("span",null,(0,l.xG)(p(T),d)),n.createElement("span",null,((h/C-1)*100).toFixed(2)," %")),n.createElement("td",{className:"pl-4"},n.createElement(D.Z,{onClick:f})))},Stocks_StockLotsTable=({lots:e,stock:t})=>{let{dispatch:a}=(0,n.useContext)(b),r=function(){let e=(0,u.ku)(`${u.ft}/stock/lot`,{method:"POST"});return(0,n.useCallback)(async t=>{let a=await e(t);return await a?.json()},[e])}(),o=(0,n.useCallback)(async()=>{let e=await r({symbol:t.symbol,shares:0,buyDate:new Date,buyPrice:0,buyBrokerage:0});a({type:"ADD LOT",symbol:t.symbol,lotId:e})},[r,a,t.symbol]);return n.createElement(n.Fragment,null,n.createElement("h3",{className:"text-center text-2xl text-green-700 dark:text-green-400"},"Lots for ",t.displayName??t.symbol),n.createElement("div",{className:"mx-8 rounded bg-gray-300 shadow dark:bg-gray-700"},n.createElement("table",{className:"w-full"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"Buy date"),n.createElement("th",null,"Shares"),n.createElement("th",null,"Buy price"),n.createElement("th",null,"Market value"),n.createElement("th",null,"Total gain"))),n.createElement("tbody",null,e.sort((e,t)=>e.buyDate.getTime()-t.buyDate.getTime()).map(e=>n.createElement(Stocks_StockLotRow,{key:e.id,lot:e,stock:t})))),n.createElement("div",{className:"p-4"},n.createElement(c.zx,{onClick:o,className:"btn btn-primary space-x-2"},n.createElement(s.RWZ,{className:"inline"}),n.createElement("span",{className:"align-middle"},"Add lot")))))},Stocks_StockRow=({stock:e})=>{let{values:{preferredDisplayCurrency:t,currencyRates:a}}=(0,n.useContext)(o.Z),r=(0,l.sL)(e.currency,t,a.usd),s=stockTotalShares(e),c=stockAvgPrice(e),i=c*s,u=e.regularMarketPrice*s,d=stockGain(e,a,t),m=(u/i-1)*100,[g,y]=(0,n.useState)(!1);return n.createElement(n.Fragment,null,n.createElement("tr",{className:"relative w-full bg-gray-200 text-right dark:bg-gray-800"},n.createElement("td",{className:"px-2 text-left"},e.symbol),n.createElement("td",{className:"px-2"},(0,l.xG)(e.regularMarketPrice,e.currency)),n.createElement("td",{className:"px-0"},(0,l.xG)(r(u),t)),n.createElement("td",null,s),n.createElement("td",{className:`px-2 ${(0,S.yY)(c)}`},(0,l.xG)(c,e.currency)),n.createElement("td",{className:`px-2 ${(0,S.yY)(d)}`},n.createElement("span",null,(0,l.xG)(d,t))),n.createElement("td",{className:`px-1 ${(0,S.yY)(m)}`},n.createElement("span",{className:isNaN(m)?"hidden":""},m.toFixed(2)," %")),n.createElement(StockRowActions,{stock:e,setShowLots:y})),n.createElement("tr",null,n.createElement("td",{colSpan:7,className:`p-0 pb-4 ${g?"":"hidden"}`},n.createElement(Stocks_StockLotsTable,{lots:e.lots,stock:e}))))};let StockRowActions=({stock:e,setShowLots:t})=>{let{dispatch:a}=(0,n.useContext)(b),r=(0,n.useCallback)(()=>{a({type:"DELETE STOCK",symbol:e.symbol})},[a,e.symbol]);return n.createElement("td",{className:"flex h-full flex-row justify-end space-x-2 px-4"},n.createElement("button",{onClick:()=>t(e=>!e),className:"hover:cursor-pointer"},n.createElement(s.XSk,{size:24})),n.createElement(D.Z,{onClick:r}))};var Stocks_StockSummaryRow=({stocks:e})=>{let{values:{preferredDisplayCurrency:t,currencyRates:a}}=(0,n.useContext)(o.Z),r=(0,n.useMemo)(()=>(0,h.S)(...e.flatMap(e=>e.lots.map(r=>(0,l.fK)(e.regularMarketPrice*r.shares,a.usd,e.currency,t)))),[a.usd,t,e]),s=(0,n.useMemo)(()=>(0,h.S)(...e.flatMap(e=>e.lots.map(r=>(0,l.fK)(e.regularMarketPrice*r.shares-r.buyPrice*r.shares,a.usd,e.currency,t)))),[a.usd,t,e]),c=(r/(r-s)-1)*100;return n.createElement("tr",{className:"text-right font-bold dark:text-purple-400"},n.createElement("td",null),n.createElement("td",null),n.createElement("td",null,(0,l.xG)(r,t)),n.createElement("td",null),n.createElement("td",null),n.createElement("td",null,(0,l.xG)(s,t)),n.createElement("td",null,c.toFixed(2)," %"))},Stocks_StockErrorDisplay=({error:e})=>e?n.createElement("div",{className:"m-4 rounded bg-red-500 px-4 py-2 text-center text-lg dark:bg-red-900"},e.message):null,features_Stocks=()=>{let[e,t]=(0,n.useReducer)(stockReducer,getDefaultStockState()),a=(0,u.h_)(`${u.ft}/stock/tracked`,{method:"GET"}),r=useSharesCallback();return(0,n.useEffect)(()=>{!a.loading&&a.data&&(t({type:"SET STOCKS",stocks:a.data}),(async()=>{if(a.data){let e=await r(...a.data.map(e=>e.symbol));t({type:"UPDATE STOCKS",stocks:e})}})())},[a.data]),n.createElement(b.Provider,{value:{state:e,dispatch:t}},n.createElement(Stocks_StockErrorDisplay,{error:e.error}),n.createElement(StocksTable,{stocks:e.stocks}),n.createElement(StockActionBar,null))};let StocksTable=({stocks:e})=>{let{values:{currencyRates:t,preferredDisplayCurrency:a}}=(0,n.useContext)(o.Z),[r,s]=(0,n.useState)(),[c,i]=(0,n.useState)(!1);return n.createElement("div",{className:"overflow-x-scroll"},n.createElement("table",{className:"w-full"},n.createElement("thead",null,n.createElement(StockTableHeader,{sortKey:r,ascending:c,setAscending:i,setSortKey:s})),n.createElement("tbody",null,e.sort(function(e,t,a,r){if(!t)return()=>0;let convert=t=>(0,l.fK)(t.regularMarketPrice,e?.usd,t.currency,r);return(n,o)=>{let s=0;switch(t){case"Symbol":s=n.symbol.localeCompare(o.symbol);break;case"Gain":s=stockGain(n,e,r)-stockGain(o,e,r);break;case"Gain percentage":let getStockGainInPercentage=e=>{let t=stockTotalShares(e),a=stockAvgPrice(e)*t;return(e.regularMarketPrice*t/a-1)*100};s=getStockGainInPercentage(n)-getStockGainInPercentage(o);break;case"Average price":s=(0,l.fK)(stockAvgPrice(n),e.usd,n.currency,r)-(0,l.fK)(stockAvgPrice(o),e.usd,o.currency,r);break;case"Current price":s=convert(n)-convert(o);break;case"Total shares":s=stockTotalShares(n)-stockTotalShares(o);break;case"Total value":s=convert(n)*stockTotalShares(n)-convert(o)*stockTotalShares(o)}return s*(a?1:-1)}}(t,r,c,a)).map(e=>n.createElement(Stocks_StockRow,{key:e.symbol,stock:e}))),n.createElement("tfoot",null,n.createElement(Stocks_StockSummaryRow,{stocks:e}))))},StockTableHeader=({sortKey:e,ascending:t,setAscending:a,setSortKey:r})=>{let o=(0,n.useCallback)(t=>()=>{e===t?a(e=>!e):r(t)},[r,a,e]);return n.createElement("tr",{className:"align-bottom text-sm text-gray-600 dark:text-gray-400"},n.createElement(Header,{sort:o,currentSortKey:e,sortKey:"Symbol",ascending:t},"Symbol"),n.createElement(Header,{sort:o,currentSortKey:e,sortKey:"Current price",ascending:t},"Price"),n.createElement(Header,{sort:o,currentSortKey:e,sortKey:"Total value",ascending:t},"Total value"),n.createElement(Header,{sort:o,currentSortKey:e,sortKey:"Total shares",ascending:t},"Shares"),n.createElement(Header,{sort:o,currentSortKey:e,sortKey:"Average price",ascending:t},"Avg price"),n.createElement(Header,{sort:o,currentSortKey:e,sortKey:"Gain",ascending:t},"Gain"),n.createElement(Header,{sort:o,currentSortKey:e,sortKey:"Gain percentage",ascending:t},"Percentage"))},StockActionBar=()=>n.createElement("div",{className:"flex justify-between p-4"},n.createElement(Stocks_AddStock,null),n.createElement(Stocks_RefreshStocksButton,null)),Header=({sort:e,children:t,currentSortKey:a,sortKey:r,ascending:o})=>n.createElement("th",null,n.createElement("button",{onClick:e(r),className:"whitespace-nowrap rounded-sm ring-red-800 focus:ring-1 dark:ring-red-600"},t,r===a&&n.createElement(Caret,{ascending:o}))),Caret=({ascending:e})=>n.createElement(n.Fragment,null,e?n.createElement(s.lmx,{className:"inline"}):n.createElement(s.Gal,{className:"inline"}));var C=a(1029),T=a(13942),pages_stocks=()=>n.createElement(n.Fragment,null,n.createElement(C.Z,{title:"Stocks"}),n.createElement(T.Z,null,n.createElement(features_Stocks,null)))},31485:function(e,t,a){"use strict";a.d(t,{Z:function(){return DeleteButton}});var r=a(75271),n=a(79498);function DeleteButton({onClick:e}){return r.createElement("button",{onClick:e,className:"flex focus:outline-none"},r.createElement(n.BFV,{size:24,className:"text-red-700 dark:text-red-500"}))}},1029:function(e,t,a){"use strict";var r=a(79238),n=a.n(r),o=a(75271);t.Z=({title:e})=>{let t=`${e} | Finance`;return o.createElement(n(),null,o.createElement("title",null,t))}},57289:function(e,t,a){"use strict";function getValueColorIndicator(e){return e>0?r.positiveColor:e<0?r.negativeColor:""}function getBackgroundColorValueIndicator(e){return e>0?r.positiveBackground:e<0?r.positiveBackground:""}a.d(t,{yY:function(){return getValueColorIndicator},yZ:function(){return getBackgroundColorValueIndicator}});let r={positiveColor:"text-green-700 dark:text-green-500",negativeColor:"text-red-700 dark:text-red-500",positiveBackground:"bg-green-400 dark:bg-green-700"}},67850:function(e,t,a){"use strict";a.d(t,{CV:function(){return sortObject},fK:function(){return convertToCurrency},p3:function(){return parseNumber},sL:function(){return useConverter},xG:function(){return formatCurrency}});var r=a(75271);function parseNumber(e){return Number.parseFloat(e.toString().replace(/[^.\d]/g,""))}function formatCurrency(e,t,a){if(!e||Number.isNaN(e))return"0";let format=t=>e.toLocaleString("en-US",{style:"currency",currency:t,currencyDisplay:"symbol",...a});try{return format(t??"USD")}catch(a){if(a instanceof RangeError&&a.message.startsWith("Invalid currency code")&&t)return format("USD").replace("USD",t);return e.toString()}}function convertToCurrency(e,t,a,r){return e*getConversionRate(t,a,r)}function getConversionRate(e,t,a){let r=t?.toLowerCase(),n=a?.toLowerCase();return r&&n&&r!==n?"usd"===r?"GBp"===a?100*e.gbp:n in e?e[n]:1:"usd"!==n?getConversionRate(e,t,"usd")*getConversionRate(e,"usd",a):"GBp"===t?1/(100*e.gbp):r in e?1/e[r]:1:1}function useConverter(e,t,a){return(0,r.useCallback)(r=>r*getConversionRate(a,e,t),[e,a,t])}function sortObject(e){return Object.keys(e).sort().reduce((t,a)=>(t[a]=e[a],t),{})}Intl.NumberFormat(void 0,{style:"currency",currency:"DKK",currencyDisplay:"code"})},16885:function(e,t,a){"use strict";function formatDate(e){let t=e.getFullYear(),a=""+(e.getMonth()+1),r=""+e.getDate();return a.length<2&&(a="0"+a),r.length<2&&(r="0"+r),[t,a,r].join("-")}a.d(t,{p:function(){return formatDate}})},26754:function(e,t,a){"use strict";function sum(...e){return e.reduce((e,t)=>e+t,0)}a.d(t,{S:function(){return sum}})},87967:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/stocks",function(){return a(5859)}])}},function(e){e.O(0,[533,888,774,179],function(){return e(e.s=87967)}),_N_E=e.O()}]);